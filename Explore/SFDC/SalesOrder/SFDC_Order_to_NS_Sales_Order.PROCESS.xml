<aetgt:getResponse xmlns:aetgt="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd"
                   xmlns:types1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd">
   <types1:Item>
      <types1:EntryId>qZpOzEkhK6LlRkP-gt-11708313-2016-11-21T03:52:29.261Z::pd.xml</types1:EntryId>
      <types1:Name>SFDC_Order_to_NS_Sales_Order</types1:Name>
      <types1:ParentFlowIds>GRvDINciZBpDUQb-gt-120271-2017-01-15T04:43:52.6Z::pd.xml</types1:ParentFlowIds>
      <types1:MimeType>application/xml+process</types1:MimeType>
      <types1:Description>Create Sales Order in NetSuite(Infa dev).</types1:Description>
      <types1:AppliesTo>Salesforce:Order</types1:AppliesTo>
      <types1:Tags>.anonymous,NetSuite</types1:Tags>
      <types1:VersionLabel>1.0</types1:VersionLabel>
      <types1:State>CURRENT</types1:State>
      <types1:ProcessGroup/>
      <types1:CreatedBy>justin.wong@appdynamics.com.sandbox</types1:CreatedBy>
      <types1:CreationDate>2016-11-21T03:52:29Z</types1:CreationDate>
      <types1:ModifiedBy>smitha.reddy@appdynamics.com.sandbox</types1:ModifiedBy>
      <types1:ModificationDate>2021-06-24T22:06:09Z</types1:ModificationDate>
      <types1:PublicationStatus>published</types1:PublicationStatus>
      <types1:PublishedBy>smitha.reddy@appdynamics.com.sandbox</types1:PublishedBy>
      <types1:PublicationDate>2021-06-24T22:06:30Z</types1:PublicationDate>
      <types1:PublishedContributionId>project:/spi.SFDC_Order_to_NS_Sales_Order/SFDC_Order_to_NS_Sales_Order.pd.xml</types1:PublishedContributionId>
      <types1:AutosaveExists>false</types1:AutosaveExists>
      <types1:Entry>
         <process xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2010/10/avosScreenflow.xsd"
                  xmlns:list="urn:activevos:spi:list:functions"
                  displayName="SFDC_Order_to_NS_Sales_Order"
                  name="SFDC_Order_to_NS_Sales_Order"
                  overrideAPIName="false">
            <appliesTo>Salesforce:Order</appliesTo>
            <description>Create Sales Order in NetSuite(Infa dev).</description>
            <tags>NetSuite,.anonymous</tags>
            <generator>Informatica Process Designer 11</generator>
            <output>
               <field description="" name="out_NetSuiteId" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="out_error" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
            </output>
            <tempFields>
               <field description="" name="NetSuiteId_Customer" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="thisSalesOrder" type="reference">
                  <options>
                     <option name="referenceTo">NetSuite-AppDynamics:SalesOrder</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">14LuGs1g15zcZeyDsfoMSl</option>
                  </options>
               </field>
               <field description="" name="thisItemList" type="reference">
                  <options>
                     <option name="referenceTo">NetSuite-AppDynamics:itemList</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">14LuGs1g15zcZeyDsfoMSl</option>
                  </options>
               </field>
               <field description="" name="thisCustomFieldList" type="reference">
                  <options>
                     <option name="referenceTo">NetSuite-AppDynamics:customFieldList</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">14LuGs1g15zcZeyDsfoMSl</option>
                  </options>
               </field>
               <field description="" name="thisCustomField" type="reference">
                  <options>
                     <option name="referenceTo">NetSuite-AppDynamics:customField</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">14LuGs1g15zcZeyDsfoMSl</option>
                  </options>
               </field>
               <field description="" name="thisOppProductsList" type="objectlist">
                  <options>
                     <option name="referenceTo">Salesforce:OpportunityLineItem</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="thisListCustomField" type="objectlist">
                  <options>
                     <option name="referenceTo">NetSuite-AppDynamics:customField</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">14LuGs1g15zcZeyDsfoMSl</option>
                  </options>
               </field>
               <field description="" name="thisCustomSalesOrder" type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:NetSuite_Sales_Order__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="thisCustomFieldsList" type="reference">
                  <options>
                     <option name="referenceTo">NetSuite-AppDynamics:customFieldList</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">14LuGs1g15zcZeyDsfoMSl</option>
                  </options>
               </field>
               <field description="" name="thisNSHeaderCustomFields" type="reference">
                  <options>
                     <option name="referenceTo">NetSuite-AppDynamics:NSHeaderCustomFields</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">14LuGs1g15zcZeyDsfoMSl</option>
                  </options>
               </field>
               <field description="" name="thisIntegrationMapping" type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="thisShippingAddress" type="reference">
                  <options>
                     <option name="referenceTo">NetSuite-AppDynamics:shippingAddress</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">14LuGs1g15zcZeyDsfoMSl</option>
                  </options>
               </field>
               <field description="" name="thisBillingAddress" type="reference">
                  <options>
                     <option name="referenceTo">NetSuite-AppDynamics:billingAddress</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">14LuGs1g15zcZeyDsfoMSl</option>
                  </options>
               </field>
               <field description="" name="thisOpptyOwnerUser" type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:User</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description=""
                      name="temp_IntegrationMapping_Billing"
                      type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description=""
                      name="temp_IntegrationMapping_Shipping"
                      type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="temp_SFDCBillingCountry" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_SFDCShippingCountry" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description=""
                      name="temp_IntegrationMapping_DealType"
                      type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description=""
                      name="temp_IntegrationMapping_ChannelTier"
                      type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description=""
                      name="temp_IntegrationMapping_Subsidiary"
                      type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="temp_SFDCSubsidiary" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_NSTaxItem" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_NetSuiteID_ParentAccount" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description=""
                      name="temp_IntegrationMapping_Currency"
                      type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="temp_OpptyCurrencyNSId" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_IntegrationMappingClass" type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="temp_NSClassId" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_IntegrationMappingTerms" type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="thisOrderProductList" type="objectlist">
                  <options>
                     <option name="referenceTo">Salesforce:OrderItem</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description=""
                      name="thisBillingStateProvinceLookup"
                      type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description=""
                      name="thisShippingStateProvinceLookup"
                      type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:Integration_Mapping__c</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="billingStateProvince" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="shippingStateProvince" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="channelTier" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_OpptyType" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="paymentTerm" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="dealType" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="exception" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="sameAccount" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="sameAddress" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="exceptionOrder" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="endCustomerNSId" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="billToSubsidiary" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="shipToSubsidiary" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="cotermOpptyId" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description=""
                      name="temp_parentCustomer_billTo_internalId"
                      type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description=""
                      name="temp_parentCustomer_shipTo_internalId"
                      type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description=""
                      name="temp_existingBillToCustomer_subsidiary"
                      type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description=""
                      name="temp_existingShipToCustomer_subsidiary"
                      type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_SFDC_OppContactRole" type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:OpportunityContactRole</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="temp_OppContact_Email" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_negativeAmountLineFound" type="boolean">
                  <options>
                     <option name="defaultvalue">false</option>
                     <option name="boolean_show_as">checkbox</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_orderProducts" type="objectlist">
                  <options>
                     <option name="referenceTo">Salesforce:OrderItem</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description=""
                      name="temp_calcAnyCustomScheduleItemsFound"
                      type="boolean">
                  <options>
                     <option name="defaultvalue">false</option>
                     <option name="boolean_show_as">checkbox</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description=""
                      name="temp_sfdcGetCustomScheduleLine"
                      type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:OrderItem</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="temp_existingOppOrderCount" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_orderProduct" type="reference">
                  <options>
                     <option name="referenceTo">Salesforce:OrderItem</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="temp_OrderProdCheckCustom" type="objectlist">
                  <options>
                     <option name="referenceTo">Salesforce:OrderItem</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">58gj2o5v8OacYp4U1C0Jw0</option>
                  </options>
               </field>
               <field description="" name="temp_RetryCounter" type="int">
                  <options>
                     <option name="required">false</option>
                     <option name="initialvalue">1</option>
                  </options>
               </field>
               <field description="" name="temp_BillingSubsidiary" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_ParentBillToExists" type="boolean">
                  <options>
                     <option name="defaultvalue">false</option>
                     <option name="boolean_show_as">checkbox</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_ParentShipToExists" type="boolean">
                  <options>
                     <option name="defaultvalue">false</option>
                     <option name="boolean_show_as">checkbox</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_BillToExists" type="boolean">
                  <options>
                     <option name="defaultvalue">false</option>
                     <option name="boolean_show_as">checkbox</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="temp_ShipToExists" type="boolean">
                  <options>
                     <option name="defaultvalue">false</option>
                     <option name="boolean_show_as">checkbox</option>
                     <option name="required">false</option>
                  </options>
               </field>
            </tempFields>
            <notes/>
            <deployment suspendOnFault="false" tracingLevel="verbose">
               <rest>
                  <allowAnonymousAccess/>
               </rest>
            </deployment>
            <flow id="a">
               <start id="b">
                  <link id="jx232rvy" targetId="jx232rvx"/>
               </start>
               <assignment id="jx232rvx">
                  <title>Get Negative Amount Items</title>
                  <operation source="list" to="temp.temp_orderProducts">
                     <query advanceQuery="false" from="Salesforce:OrderItem">
                        <where>OrderId = '{$Id}' AND Ignore_Sync__c != true AND Net_Total_Price__c &lt; 0 AND SBQQ__ContractAction__c not in ('Quantity Decrease','Cancel') AND Line_Type__c != 'LINKED ASSET' LIMIT 2000</where>
                     </query>
                  </operation>
                  <link id="jx232sa7" targetId="jx232sa6"/>
               </assignment>
               <assignment id="kosw3a7w">
                  <title>Lookup SFDC IntegrationMapping</title>
                  <operation source="query" to="temp.temp_IntegrationMapping_Billing">
                     <query advanceQuery="false" from="Salesforce:Integration_Mapping__c">
                        <where>Lookup_Name__c = '{$BillingCountry}' and Lookup_Type__c = 'Country Code'</where>
                     </query>
                  </operation>
                  <operation source="query" to="temp.temp_IntegrationMapping_Shipping">
                     <query advanceQuery="false" from="Salesforce:Integration_Mapping__c">
                        <where>Lookup_Name__c = '{$ShippingCountry}' and Lookup_Type__c = 'Country Code'</where>
                     </query>
                  </operation>
                  <operation source="query" to="temp.temp_IntegrationMapping_DealType">
                     <query advanceQuery="false" from="Salesforce:Integration_Mapping__c">
                        <where>Lookup_Name__c = '{$Deal_Type__c}' and Lookup_Type__c = 'Order Type'</where>
                     </query>
                  </operation>
                  <operation source="query" to="temp.temp_IntegrationMapping_ChannelTier">
                     <query advanceQuery="false" from="Salesforce:Integration_Mapping__c">
                        <where>Lookup_Name__c = '{$temp.temp_OpptyType}' and Lookup_Type__c = 'Channel Tier'</where>
                     </query>
                  </operation>
                  <operation source="query" to="temp.temp_IntegrationMapping_Currency">
                     <query advanceQuery="false" from="Salesforce:Integration_Mapping__c">
                        <where>Lookup_Name__c = '{$CurrencyIsoCode}' and  Lookup_Type__c = 'Currency'</where>
                     </query>
                  </operation>
                  <operation source="query" to="temp.temp_IntegrationMappingTerms">
                     <query advanceQuery="false" from="Salesforce:Integration_Mapping__c">
                        <where>Lookup_Name__c = '{$Payment_Terms__c}' and Lookup_Type__c = 'Payment Term'</where>
                     </query>
                  </operation>
                  <operation source="query" to="temp.thisBillingStateProvinceLookup">
                     <query advanceQuery="false" from="Salesforce:Integration_Mapping__c">
                        <where>Lookup_Type__c = 'State/Province' AND Attribute_1__c = '{$BillingCountry}' AND Lookup_Name__c = '{$BillingState}'</where>
                     </query>
                  </operation>
                  <operation source="query" to="temp.thisShippingStateProvinceLookup">
                     <query advanceQuery="false" from="Salesforce:Integration_Mapping__c">
                        <where>Lookup_Type__c = 'State/Province' AND Attribute_1__c = '{$ShippingCountry}' AND Lookup_Name__c = '{$ShippingState}'</where>
                     </query>
                  </operation>
                  <link id="kosw3blr" targetId="kosw3blg"/>
               </assignment>
               <assignment id="kphd8q6e">
                  <title>Assign Billing Address values</title>
                  <operation source="field" to="temp.thisBillingAddress[1]/billingAddress1">BillingStreet</operation>
                  <operation source="field" to="temp.thisBillingAddress[1]/billingCity">BillingCity</operation>
                  <operation source="field" to="temp.thisBillingAddress[1]/billingState">temp.billingStateProvince</operation>
                  <operation source="field" to="temp.thisBillingAddress[1]/billingZip">BillingPostalCode</operation>
                  <operation source="field" to="temp.thisBillingAddress[1]/billingCountry">temp.temp_SFDCBillingCountry</operation>
                  <link id="kphd8q6g" targetId="kphd8q0w"/>
               </assignment>
               <assignment id="kphd8q0w">
                  <title>Assign Shipping Address values</title>
                  <operation source="formula" to="temp.thisShippingAddress[1]/shippingAddress1">
                     <expression language="XQuery">fn:substring($ShippingStreet, 1,150)</expression>
                  </operation>
                  <operation source="formula" to="temp.thisShippingAddress[1]/shippingAddress2">
                     <expression language="XQuery">fn:substring($ShippingStreet, 151)</expression>
                  </operation>
                  <operation source="field" to="temp.thisShippingAddress[1]/shippingAddressee">Ship_To__r.Account__r.Name</operation>
                  <operation source="field" to="temp.thisShippingAddress[1]/shippingCity">ShippingCity</operation>
                  <operation source="field" to="temp.thisShippingAddress[1]/shippingState">temp.shippingStateProvince</operation>
                  <operation source="field" to="temp.thisShippingAddress[1]/shippingZip">ShippingPostalCode</operation>
                  <operation source="field" to="temp.thisShippingAddress[1]/shippingCountry">temp.temp_SFDCShippingCountry</operation>
                  <link id="kphd8q0y" targetId="kot0w7vg"/>
               </assignment>
               <assignment id="kot0w7vg">
                  <title>Assign Billing Subsidiary</title>
                  <operation source="formula" to="temp.temp_BillingSubsidiary">
                     <expression language="XQuery">if($EULA_Region__c='Americas') then '1' else if($EULA_Region__c='APAC' or $EULA_Region__c='EMEAR') then '9' else ''</expression>
                  </operation>
                  <link id="kq8jgwe0" targetId="kot2hvbg"/>
               </assignment>
               <assignment id="kot2hvbg">
                  <title>Check if Parent BillTo, Parent ShipTo, BillTo, ShipTo exists</title>
                  <operation source="formula" to="temp.temp_ParentBillToExists">
                     <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') then if(fn:empty($Bill_To__r.Account__r.Parent.NetSuite_Id__c)) then false() else true()
else if(fn:empty($Bill_To__r.Account__r.Parent.UK2_Netsuite_ID__c)) then false() else true()</expression>
                  </operation>
                  <operation source="formula" to="temp.temp_ParentShipToExists">
                     <expression language="XQuery">if(fn:empty($Ship_To__r.Account__r.Parent.NetSuite_Id__c) and fn:empty($Ship_To__r.Account__r.Parent.UK2_Netsuite_ID__c)) then false() else true()
</expression>
                  </operation>
                  <operation source="formula" to="temp.temp_BillToExists">
                     <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') then if(fn:empty($Bill_To__r.Account__r.NetSuite_Id__c)) then false() else true()
else if(fn:empty($Bill_To__r.Account__r.UK2_Netsuite_ID__c)) then false() else true()</expression>
                  </operation>
                  <operation source="formula" to="temp.temp_ShipToExists">
                     <expression language="XQuery">if(fn:empty($Ship_To__r.Account__r.NetSuite_Id__c) and fn:empty($Ship_To__r.Account__r.UK2_Netsuite_ID__c)) then false() else true()</expression>
                  </operation>
                  <link id="kot2hyf6" targetId="jpyi36a3"/>
               </assignment>
               <assignment id="kq8jgut5">
                  <title>Check if Parent ShipTo exists</title>
                  <operation source="formula" to="temp.temp_ParentShipToExists">
                     <expression language="XQuery">if(fn:empty($Ship_To__r.Account__r.Parent.NetSuite_Id__c) and fn:empty($Ship_To__r.Account__r.Parent.UK2_Netsuite_ID__c)) then false() else true()
</expression>
                  </operation>
                  <link id="kq8jgut7" targetId="jpyi36dj"/>
               </assignment>
               <assignment id="jrc1kuda">
                  <title>Assign Existing BillTo Subsidiary to temp Field</title>
                  <operation source="field" to="temp.temp_existingBillToCustomer_subsidiary">output.subsidiary</operation>
                  <operation source="formula" to="output.subsidiary">
                     <expression language="XQuery">()</expression>
                  </operation>
                  <link id="kq8jgx33" targetId="jrjoqzyx"/>
               </assignment>
               <assignment id="jrjoqzyx">
                  <title>Get Opportunity Contact</title>
                  <operation source="query" to="temp.temp_SFDC_OppContactRole">
                     <query advanceQuery="false" from="Salesforce:OpportunityContactRole">
                        <where>OpportunityId = '{$OpportunityId}' AND IsPrimary = true AND Contact.Email != ''</where>
                     </query>
                  </operation>
                  <link id="jrjor0hr" targetId="jrjor0hq"/>
               </assignment>
               <assignment id="j71bjwhs">
                  <title>Assignment sameAccount</title>
                  <operation source="formula" to="temp.sameAccount">
                     <expression language="XQuery">if ($Partner__c != '' and $Partner__c != $AccountId)
then 'No' else 'Yes'</expression>
                  </operation>
                  <link id="kq8jgxjk" targetId="kq8jgx5u"/>
               </assignment>
               <assignment id="kq8jgx5u">
                  <title>Check if  BillTo exists</title>
                  <operation source="formula" to="temp.temp_BillToExists">
                     <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') then if(fn:empty($Bill_To__r.Account__r.NetSuite_Id__c)) then false() else true()
else if(fn:empty($Bill_To__r.Account__r.UK2_Netsuite_ID__c)) then false() else true()</expression>
                  </operation>
                  <link id="kq8jgx5w" targetId="j71bjwkg"/>
               </assignment>
               <assignment id="idptne53">
                  <title>Assign NSHeaderCustomFields</title>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_channel_tier">temp.channelTier</operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_contract_start_date">
                     <expression language="XQuery">if(fn:empty($Start_Date__c)) then() else concat(infa:format($Start_Date__c, "yyyy-MM-dd"), "T12:00:00.000-00:00")</expression>
                  </operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_license_term_in_months">License_T__c</operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_end_user">
                     <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') 
	then (if(fn:string-length($Ship_To__r.Account__r.NetSuite_Id__c) &gt; 0) 
		then $Ship_To__r.Account__r.NetSuite_Id__c 
		else $Ship_To__r.Account__r.UK2_Netsuite_ID__c) 
	else  (if(fn:string-length($Ship_To__r.Account__r.UK2_Netsuite_ID__c) &gt; 0) 
		then $Ship_To__r.Account__r.UK2_Netsuite_ID__c
		else $Ship_To__r.Account__r.NetSuite_Id__c)</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_netsuite_entity">
                     <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') 
	then (if(fn:string-length($Ship_To__r.Account__r.NetSuite_Id__c) &gt; 0) 
		then $Ship_To__r.Account__r.NetSuite_Id__c 
		else $Ship_To__r.Account__r.UK2_Netsuite_ID__c) 
	else  (if(fn:string-length($Ship_To__r.Account__r.UK2_Netsuite_ID__c) &gt; 0) 
		then $Ship_To__r.Account__r.UK2_Netsuite_ID__c
		else $Ship_To__r.Account__r.NetSuite_Id__c)</expression>
                  </operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_opportunity_currency">CurrencyIsoCode</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_opportunity_name">Opportunity_Name__c</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_opportunity_record_type">RecordType.Name</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_order_type">temp.temp_IntegrationMapping_DealType.Mapping_Name__c</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_otd_from_synced_quote">One_Time_Discount__c</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_partner_margin_discount">SBQQ__Quote__r.SBQQ__PartnerDiscount__c</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_salesforce_currency">CurrencyIsoCode</operation>
                  <operation source="field" to="temp.thisNSHeaderCustomFields[1]/custbody_type">Type</operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_sfdc_start_date">
                     <expression language="XQuery">if(fn:empty($Start_Date__c)) then() else concat(infa:format($Start_Date__c, "yyyy-MM-dd"), "T12:00:00.000-00:00")      </expression>
                  </operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_celigo_ns_sfdc_sync_id">Opportunity.Opportunity_18_Digit_ID__c</operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/Custbody_SFDC_Booked_Date">
                     <expression language="XQuery">if(fn:empty($Booked_Date__c)) then() else concat(infa:format($Booked_Date__c, "yyyy-MM-dd"), "T12:00:00.000-00:00")    </expression>
                  </operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_celigo_ns_sfdc_sync">Id</operation>
                  <operation source="field" to="temp.thisNSHeaderCustomFields[1]/custbody_region">output.region</operation>
                  <operation source="field" to="temp.thisNSHeaderCustomFields[1]/custbody_quote">SBQQ__Quote__r.Name</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_customer_credit_status">Bill_To__r.Account__r.Credit_Status__c</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_aws_margin">Opportunity.Cost_Of_Sale__c</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_deal_source">Opportunity.Deal_Source__c</operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_titan_rebate">
                     <expression language="XQuery">if ($Partner__r.Partner_Status__c = 'Titan') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="field" to="temp.thisNSHeaderCustomFields[1]/custbody_gsp">Account.Cisco_Node_1__c</operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_ad_other_modification">
                     <expression language="XQuery">if($Other_Modification__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_cancellation_rights">
                     <expression language="XQuery">if($Cancellation_Right__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_retroactive_swap">
                     <expression language="XQuery">if($Retroactive_Swap_Rights__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_one_time_swap">
                     <expression language="XQuery">if($One_Time_Swap__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_ps_conversion">
                     <expression language="XQuery">if($PS_Conversion__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_federal_deal">
                     <expression language="XQuery">if($Federal_Account__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_deployment_license_conversion">
                     <expression language="XQuery">if($License_Conversion__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_future_purchase_option">
                     <expression language="XQuery">if($Future_Purchase_Option__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_volume_discount_table">
                     <expression language="XQuery">if($Volume_Discount_Table__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_ad_unique_purchase_price_lock">
                     <expression language="XQuery">if($Unique_Purchase_Price_Lock__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_ad_unique_renewal_price_lock">
                     <expression language="XQuery">if($Unique_Renewal_Price_Lock__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_purchase_price_lock">
                     <expression language="XQuery">if($Purchase_Price_Lock__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_renewal_price_lock">
                     <expression language="XQuery">if($Renewal_Price_Lock__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_ad_enterprise_flag">
                     <expression language="XQuery">if($Enterprise_Flag__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_partnerstatus_sfdc">
                     <expression language="XQuery">$Partner__r.Partner_Status__c</expression>
                  </operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_orig_so_ref_number">Original_Order_Reference_Number__c</operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_sales_program_name">
                     <expression language="XQuery">$Cisco_Bundle_Program__c </expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_partner_incentive_pgm_qual">
                     <expression language="XQuery">$Partner_Incentive_Program_Qualification__c</expression>
                  </operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_billing_sched_memo">Payment_Schedule_Memo__c</operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_dipq_program">
                     <expression language="XQuery">$Distributor_Incentive_Program__c </expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_price_lock_on_services">
                     <expression language="XQuery">if($Service_Price_Lock__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_revrec_others">
                     <expression language="XQuery">if($RevRec_Others__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_non_ga_terms">
                     <expression language="XQuery">if($Non_GA_Terms__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="field" to="temp.thisNSHeaderCustomFields[1]/custbody_sfdc_memo">Opportunity.Order_Ops_Comments__c</operation>
                  <operation source="field"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_cisco_manual_tracking">Opportunity.Cisco_Manual_Tracking__c</operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_joint_sell">
                     <expression language="XQuery">if($Opportunity.Joint_Sell__c = 'true') then 'T' else 'F' </expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_cisco_capital">
                     <expression language="XQuery">if($CiscoCapital__c = 'Yes') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_cancel_replace">
                     <expression language="XQuery">if($Cancel_Replace__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula" to="temp.thisNSHeaderCustomFields[1]/custbody_baddebt">
                     <expression language="XQuery">if($Bad_Debt__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_concession">
                     <expression language="XQuery">if($Concession__c  = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_ct_mod_manual_linking">
                     <expression language="XQuery">if(fn:empty($Multi_Contract_Mod_Opp_Name__c)) then 'F' else 'T'</expression>
                  </operation>
                  <operation source="formula"
                             to="temp.thisNSHeaderCustomFields[1]/custbody_abl_to_ibl_conv">
                     <expression language="XQuery">if($ABL_IBL_License_Conversion__c = 'true') then 'T' else 'F'</expression>
                  </operation>
                  <link id="iydvxbey" targetId="iaj27kfk"/>
               </assignment>
               <assignment id="iaj27kfk">
                  <title>Populate Sales Order Header</title>
                  <operation source="formula" to="temp.thisSalesOrder[1]/entity[1]/internalId">
                     <expression language="XQuery">if($Opportunity_Type__c = 'VAR â€“ Referral') then (if($temp.temp_BillingSubsidiary = '1') then $Account.NetSuite_Id__c else $Account.UK2_Netsuite_ID__c)  else (if($temp.temp_BillingSubsidiary = '1') then $Bill_To__r.Account__r.NetSuite_Id__c else $Bill_To__r.Account__r.UK2_Netsuite_ID__c)
</expression>
                  </operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionBillAddress[1]/billAddr1">BillingStreet</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionBillAddress[1]/billCity">BillingCity</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionBillAddress[1]/billState">temp.billingStateProvince</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionBillAddress[1]/billZip">BillingPostalCode</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionBillAddress[1]/billCountry">temp.temp_SFDCBillingCountry</operation>
                  <operation source="constant" to="temp.thisSalesOrder[1]/customForm[1]/internalId">107</operation>
                  <operation source="formula" to="temp.thisSalesOrder[1]/startDate">
                     <expression language="XQuery">if(fn:empty($Start_Date__c)) then() else concat(infa:format($Start_Date__c, "yyyy-MM-dd"), "T12:00:00.000-00:00")</expression>
                  </operation>
                  <operation source="formula" to="temp.thisSalesOrder[1]/endDate">
                     <expression language="XQuery">if(fn:empty($End_Date__c)) then() else concat(infa:format($End_Date__c, "yyyy-MM-dd"), "T12:00:00.000-00:00")</expression>
                  </operation>
                  <operation source="field" to="temp.thisSalesOrder[1]/otherRefNum">PoNumber</operation>
                  <operation source="formula" to="temp.thisSalesOrder[1]/salesRep[1]/internalId">
                     <expression language="XQuery">if (fn:empty($Owner_NetSuite_Id__c)) then 'None' else $Owner_NetSuite_Id__c</expression>
                  </operation>
                  <operation source="field" to="temp.thisSalesOrder[1]/class[1]/internalId">temp.temp_NSClassId</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionShipAddress[1]/shipAddr1">ShippingStreet</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionShipAddress[1]/shipCity">ShippingCity</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionShipAddress[1]/shipState">temp.shippingStateProvince</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionShipAddress[1]/shipCountry">temp.temp_SFDCShippingCountry</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionShipAddress[1]/shipZip">ShippingPostalCode</operation>
                  <operation source="field" to="temp.thisSalesOrder[1]/terms[1]/internalId">temp.temp_IntegrationMappingTerms.Mapping_Name__c</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionBillAddress[1]/billAddressee">BillToContact.Account.Name</operation>
                  <operation source="field"
                             to="temp.thisSalesOrder[1]/transactionShipAddress[1]/shipAddressee">ShipToContact.Account.Name</operation>
                  <operation source="formula" to="temp.thisSalesOrder[1]/subsidiary[1]/internalId">
                     <expression language="XQuery">if($EULA_Region__c='Americas') then '1' else 
if($EULA_Region__c='APAC' or $EULA_Region__c='EMEAR') then '9' else ''</expression>
                  </operation>
                  <link id="iaj2ydsj" targetId="iaj2ydsi"/>
               </assignment>
               <assignment id="iaj2ydsi">
                  <title>Query for Order Products</title>
                  <operation source="list" to="temp.thisOrderProductList">
                     <query advanceQuery="false" from="Salesforce:OrderItem">
                        <where>OrderId = '{$Id}' AND Ignore_Sync__c != true AND SBQQ__ContractAction__c not in ('Quantity Decrease','Cancel')  AND Line_Type__c != 'LINKED ASSET' LIMIT 2000</where>
                     </query>
                  </operation>
                  <operation source="query" to="temp.temp_sfdcGetCustomScheduleLine">
                     <query advanceQuery="false" from="Salesforce:OrderItem">
                        <where>OrderId = '{$Id}' AND Payment_Schedule_Details__c = 'Custom' AND SBQQ__ContractAction__c not in ('Quantity Decrease','Cancel') AND Line_Type__c != 'LINKED ASSET' Limit 1</where>
                     </query>
                  </operation>
                  <link id="jyiv1dmn" targetId="jyiv1dmm"/>
               </assignment>
               <assignment id="idt31pcn">
                  <title>Add thisItemList to thisSalesOrder</title>
                  <operation source="field" to="temp.thisSalesOrder[1]/itemList">temp.thisItemList</operation>
                  <link id="ifrz7mtd" targetId="ifrz7mtc"/>
               </assignment>
               <container id="jx232sa6" type="exclusive">
                  <title>Negative Line Found?</title>
                  <flow id="jx232saa">
                     <assignment id="jx232tsx">
                        <title>Assign Exception - Order Line Amount &lt; 0</title>
                        <operation source="constant" to="output.out_error">Orders with negative line amounts will not be synced to Netsuite.  There are {list:count($temp.temp_orderProducts)} negative lines for this order.</operation>
                        <operation source="constant" to="temp.exception">Yes</operation>
                        <operation source="constant" to="temp.exceptionOrder">Orders with negative line amounts will not be synced to Netsuite.  There are {list:count($temp.temp_orderProducts)} negative lines for this order.</operation>
                        <link id="jx232u4t" targetId="jx232u4r"/>
                     </assignment>
                     <jumpTo id="jx232u4r">
                        <link id="jx232u4s" targetId="jerndxei"/>
                     </jumpTo>
                  </flow>
                  <flow id="jx232sad">
                     <container id="k9w9fak0" type="exclusive">
                        <title>Lambda Registration</title>
                        <flow id="k9w9fak1">
                           <link id="k9w9fakc" targetId="k9w9fak0" type="containerLink"/>
                        </flow>
                        <flow id="k9w9fak2">
                           <service id="k9w9fak3">
                              <title>Check for Existing Opportunity in NS</title>
                              <serviceName>NetSuite-AppDynamics:searchSalesOrderHeader</serviceName>
                              <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                              <serviceInput>
                                 <parameter name="salesOrder_NS_statusNotClosed" source="constant">_salesOrderClosed</parameter>
                                 <parameter name="salesOrder_NS_statusNotCancelled" source="constant">_salesOrderCancelled</parameter>
                                 <parameter name="salesOrder_sfdcOppId" source="field">Opportunity_18_Digit_ID__c</parameter>
                              </serviceInput>
                              <link id="k9w9fake" targetId="k9w9fak4"/>
                           </service>
                           <assignment id="k9w9fak4">
                              <title>Assign Order Count</title>
                              <operation source="formula" to="temp.temp_existingOppOrderCount">
                                 <expression language="XQuery">if($output.search_SalesOrder_count=0 or $output.search_SalesOrder_count='') then '' else 'X'</expression>
                              </operation>
                              <link id="k9w9fakf" targetId="k9w9fak5"/>
                           </assignment>
                           <container id="k9w9fak5" type="exclusive">
                              <title>Opportunity (order)doesn't exists in NS?</title>
                              <flow id="k9w9fak6">
                                 <link id="k9w9faki" targetId="k9w9fak5" type="containerLink"/>
                              </flow>
                              <flow id="k9w9fak7">
                                 <assignment id="k9w9fak8">
                                    <title>Assign Exception - Opp Already Exists</title>
                                    <operation source="constant" to="output.out_error">An Order already exists in Netsuite for that opportunity, {$output.search_SalesOrder_tranId}. Either update the Order Reference Number in SFDC with Netsuite SO number or cancel the order in Netsuite and re-sync again from SFDC.</operation>
                                    <operation source="constant" to="temp.exception">Yes</operation>
                                    <operation source="constant" to="temp.exceptionOrder">An Order already exists in Netsuite for that opportunity, {$output.search_SalesOrder_tranId}. Either update the Order Reference Number in SFDC with Netsuite SO number or cancel the order in Netsuite and re-sync again from SFDC.</operation>
                                    <link id="k9w9fakj" targetId="k9w9fak9"/>
                                 </assignment>
                                 <jumpTo id="k9w9fak9">
                                    <link id="k9w9fakk" targetId="jerndxei"/>
                                 </jumpTo>
                              </flow>
                              <link id="k9w9fakg" targetId="k9w9fak6" type="containerLink">
                                 <condition source="formula">
                                    <function name="string-equals">
                                       <arg name="left">{$temp.temp_existingOppOrderCount}</arg>
                                       <arg name="right"/>
                                    </function>
                                 </condition>
                              </link>
                              <link id="k9w9fakh" targetId="k9w9fak7" type="containerLink"/>
                           </container>
                           <link id="k9w9fakd" targetId="k9w9fak0" type="containerLink"/>
                        </flow>
                        <link id="k9w9faka" targetId="k9w9fak1" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$Lambda_Registration__c}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="k9w9fakb" targetId="k9w9fak2" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$Lambda_Registration__c}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="jx232u2m" targetId="jx232sa6" type="containerLink"/>
                  </flow>
                  <link id="jx232sa9" targetId="jx232saa" type="containerLink">
                     <condition source="formula">
                        <function name="not-empty">
                           <arg name="field">{$temp.temp_orderProducts}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="jx232sac" targetId="jx232sad" type="containerLink">
                     <condition source="formula">
                        <function name="empty">
                           <arg name="field">{$temp.temp_orderProducts}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="k9w9faov" targetId="j0o5o28r"/>
               </container>
               <container id="j0o5o28r" type="exclusive">
                  <title>Opportunity Type</title>
                  <flow id="j0o5o2al">
                     <assignment id="j0o5o2gv">
                        <title>Assign Partner Account to NetSuiteID</title>
                        <operation source="field" to="temp.NetSuiteId_Customer">Partner__r.NetSuite_Id__c</operation>
                        <operation source="formula" to="temp.temp_OpptyType">
                           <expression language="XQuery">if ($Opportunity.Opportunity_Type__c = 'VAR â€“ Resale') 
then 'VAR - Resale'
else $Opportunity.Opportunity_Type__c</expression>
                        </operation>
                     </assignment>
                     <link id="j0o5o2am" targetId="j0o5o28r" type="containerLink"/>
                  </flow>
                  <flow id="j0o5o2ao">
                     <assignment id="j0o5o2f4">
                        <title>Assign End Customer to NetSuiteId</title>
                        <operation source="field" to="temp.NetSuiteId_Customer">Account.NetSuite_Id__c</operation>
                        <operation source="formula" to="temp.temp_OpptyType">
                           <expression language="XQuery">if ($Opportunity.Opportunity_Type__c = 'VAR â€“ Referral') 
then 'VAR - Referral'
else $Opportunity.Opportunity_Type__c</expression>
                        </operation>
                     </assignment>
                     <link id="j0o5o2ap" targetId="j0o5o28r" type="containerLink"/>
                  </flow>
                  <link id="j0o5o2ai" targetId="j0o5o2al" type="containerLink">
                     <condition source="formula">
                        <function name="included">
                           <arg name="left">{$Opportunity.Opportunity_Type__c}</arg>
                           <arg name="right">CSP Marketplace,Financed,Fulfillment,Resell</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="j0o5o2aj" targetId="j0o5o2ao" type="containerLink"/>
                  <link id="kosw3a7x" targetId="kosw3a7w"/>
               </container>
               <container id="kosw3blg" type="exclusive">
                  <title>temp_IntegrationMapping_ChannelTier</title>
                  <flow id="kosw3blh">
                     <assignment id="kosw3bli">
                        <title>Assignment to channelTier</title>
                        <operation source="field" to="temp.channelTier">temp.temp_IntegrationMapping_ChannelTier.Mapping_Name__c</operation>
                     </assignment>
                     <link id="kosw3blo" targetId="kosw3blg" type="containerLink"/>
                  </flow>
                  <flow id="kosw3blj">
                     <assignment id="kosw3blk">
                        <title>Assign Channel Tier Exception</title>
                        <operation source="constant" to="Integration_Exception_Message__c">No Channel Tier mapping</operation>
                        <operation source="constant" to="SO_Integration_Status__c">Error</operation>
                        <operation source="formula" to="Sync_Time__c">
                           <function name="time_from_now">
                              <arg name="value">0</arg>
                              <arg name="HM_flag">M</arg>
                           </function>
                        </operation>
                        <operation source="constant" to="output.out_error">No Channel Tier mapping</operation>
                        <link id="kosw3blp" targetId="kosw3bll"/>
                     </assignment>
                     <jumpTo id="kosw3bll">
                        <link id="kosw3blq" targetId="jerndxk3"/>
                     </jumpTo>
                  </flow>
                  <link id="kosw3blm" targetId="kosw3blh" type="containerLink">
                     <condition source="formula">
                        <function name="set">
                           <arg name="field">{$temp.temp_IntegrationMapping_ChannelTier}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="kosw3bln" targetId="kosw3blj" type="containerLink">
                     <condition source="formula">
                        <function name="unset">
                           <arg name="field">{$temp.temp_IntegrationMapping_ChannelTier}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="kosw3btc" targetId="kosw3bt1"/>
               </container>
               <container id="kosw3bt1" type="exclusive">
                  <title>temp_IntegrationMappingTerms</title>
                  <flow id="kosw3bt2">
                     <assignment id="kosw3bt3">
                        <title>Assignment to paymentTerm</title>
                        <operation source="field" to="temp.paymentTerm">temp.temp_IntegrationMappingTerms.Mapping_Name__c</operation>
                     </assignment>
                     <link id="kosw3bt9" targetId="kosw3bt1" type="containerLink"/>
                  </flow>
                  <flow id="kosw3bt4">
                     <assignment id="kosw3bt5">
                        <title>Assign Payment Term Exception</title>
                        <operation source="constant" to="Integration_Exception_Message__c">No Payment Term mapping</operation>
                        <operation source="constant" to="SO_Integration_Status__c">Error</operation>
                        <operation source="formula" to="Sync_Time__c">
                           <function name="time_from_now">
                              <arg name="value">0</arg>
                              <arg name="HM_flag">M</arg>
                           </function>
                        </operation>
                        <operation source="constant" to="output.out_error">No Payment Term mapping</operation>
                        <link id="kosw3bta" targetId="kosw3bt6"/>
                     </assignment>
                     <jumpTo id="kosw3bt6">
                        <link id="kosw3btb" targetId="jerndxk3"/>
                     </jumpTo>
                  </flow>
                  <link id="kosw3bt7" targetId="kosw3bt2" type="containerLink">
                     <condition source="formula">
                        <function name="set">
                           <arg name="field">{$temp.temp_IntegrationMappingTerms}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="kosw3bt8" targetId="kosw3bt4" type="containerLink">
                     <condition source="formula">
                        <function name="unset">
                           <arg name="field">{$temp.temp_IntegrationMappingTerms}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="kosw3byj" targetId="kosw3by8"/>
               </container>
               <container id="kosw3by8" type="exclusive">
                  <title>temp_IntegrationMapping_DealType</title>
                  <flow id="kosw3by9">
                     <assignment id="kosw3bya">
                        <title>Assignment to dealType</title>
                        <operation source="field" to="temp.dealType">temp.temp_IntegrationMapping_DealType.Mapping_Name__c</operation>
                     </assignment>
                     <link id="kosw3byg" targetId="kosw3by8" type="containerLink"/>
                  </flow>
                  <flow id="kosw3byb">
                     <assignment id="kosw3byc">
                        <title>Assign Deal Type Exception</title>
                        <operation source="constant" to="Integration_Exception_Message__c">No Deal Type mapping</operation>
                        <operation source="constant" to="SO_Integration_Status__c">Error</operation>
                        <operation source="formula" to="Sync_Time__c">
                           <function name="time_from_now">
                              <arg name="value">0</arg>
                              <arg name="HM_flag">M</arg>
                           </function>
                        </operation>
                        <operation source="constant" to="output.out_error">No Deal Type mapping</operation>
                        <link id="kosw3byh" targetId="kosw3byd"/>
                     </assignment>
                     <jumpTo id="kosw3byd">
                        <link id="kosw3byi" targetId="jerndxk3"/>
                     </jumpTo>
                  </flow>
                  <link id="kosw3bye" targetId="kosw3by9" type="containerLink">
                     <condition source="formula">
                        <function name="set">
                           <arg name="field">{$temp.temp_IntegrationMapping_DealType}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="kosw3byf" targetId="kosw3byb" type="containerLink">
                     <condition source="formula">
                        <function name="unset">
                           <arg name="field">{$temp.temp_IntegrationMapping_DealType}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="kosw3byk" targetId="kosw3485"/>
               </container>
               <container id="kosw3485" type="parallel">
                  <title>Parallel Paths 2</title>
                  <flow id="kosw351c">
                     <container id="kosw38zj" type="exclusive">
                        <title>Is IntegrationMapping_Billing set?</title>
                        <flow id="kosw38zk">
                           <assignment id="kosw38zl">
                              <title>Add Billing Country if lookup returns non null</title>
                              <operation source="field" to="temp.temp_SFDCBillingCountry">temp.temp_IntegrationMapping_Billing.Mapping_Name__c</operation>
                              <operation source="formula" to="temp.billToSubsidiary">
                                 <expression language="XQuery">if($EULA_Region__c='Americas') then '1' else 
if($EULA_Region__c='APAC' or $EULA_Region__c='EMEAR') then '9' else ''</expression>
                              </operation>
                              <operation source="query" to="temp.temp_IntegrationMapping_Subsidiary">
                                 <query advanceQuery="false" from="Salesforce:Integration_Mapping__c">
                                    <where>Mapping_Name__c = '{$temp.temp_IntegrationMapping_Billing.Attribute_2__c}' and Lookup_Type__c = 'Subsidiary'</where>
                                 </query>
                              </operation>
                              <link id="kosw38zs" targetId="kosw38zm"/>
                           </assignment>
                           <service id="kosw38zm">
                              <title>GetGeoRegion</title>
                              <serviceName>NetSuite-CiscoDepartmentLookup:GetGeoRegion</serviceName>
                              <serviceGUID>gPD9ex60xIIkSd9IzZgAmL</serviceGUID>
                              <serviceInput>
                                 <parameter name="countryCode" source="field" updatable="true">temp.temp_IntegrationMapping_Billing.Attribute_1__c</parameter>
                              </serviceInput>
                           </service>
                           <link id="kosw38zr" targetId="kosw38zj" type="containerLink"/>
                        </flow>
                        <flow id="kosw38zn">
                           <assignment id="kosw38zo">
                              <title>Add blank value to Billing Country</title>
                              <operation source="constant" to="temp.temp_SFDCBillingCountry"/>
                              <operation source="constant" to="temp.billToSubsidiary"/>
                           </assignment>
                           <link id="kosw38zt" targetId="kosw38zj" type="containerLink"/>
                        </flow>
                        <link id="kosw38zp" targetId="kosw38zk" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$temp.temp_IntegrationMapping_Billing}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kosw38zq" targetId="kosw38zn" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$temp.temp_IntegrationMapping_Billing}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="kosw351d" targetId="kosw3485" type="containerLink"/>
                  </flow>
                  <flow id="kphd8o81">
                     <container id="kphd8p3z" type="exclusive">
                        <title>thisBillingStateProvinceLookup</title>
                        <flow id="kphd8p40">
                           <assignment id="kphd8p41">
                              <title>Assignment to billingStateProvince</title>
                              <operation source="field" to="temp.billingStateProvince">temp.thisBillingStateProvinceLookup.Mapping_Name__c</operation>
                           </assignment>
                           <link id="kphd8p46" targetId="kphd8p3z" type="containerLink"/>
                        </flow>
                        <flow id="kphd8p42">
                           <assignment id="kphd8p43">
                              <title>Assignment to billingStateProvince</title>
                              <operation source="field" to="temp.billingStateProvince">BillingState</operation>
                           </assignment>
                           <link id="kphd8p47" targetId="kphd8p3z" type="containerLink"/>
                        </flow>
                        <link id="kphd8p44" targetId="kphd8p40" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$temp.thisBillingStateProvinceLookup}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kphd8p45" targetId="kphd8p42" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$temp.thisBillingStateProvinceLookup}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="kphd8o82" targetId="kosw3485" type="containerLink"/>
                  </flow>
                  <flow id="kosw353q">
                     <container id="kosw39f5" type="exclusive">
                        <title>Is temp_IntegrationMappingClass Set?</title>
                        <flow id="kosw39f6">
                           <assignment id="kosw39f7">
                              <title>Assignment to temp_NSClassId</title>
                              <operation source="field" to="temp.temp_NSClassId">temp.temp_IntegrationMappingClass.Mapping_Name__c</operation>
                           </assignment>
                           <link id="kosw39fc" targetId="kosw39f5" type="containerLink"/>
                        </flow>
                        <flow id="kosw39f8">
                           <assignment id="kosw39f9">
                              <title>Assignment to temp_NSClassId</title>
                              <operation source="constant" to="temp.temp_NSClassId"/>
                           </assignment>
                           <link id="kosw39fd" targetId="kosw39f5" type="containerLink"/>
                        </flow>
                        <link id="kosw39fa" targetId="kosw39f6" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$temp.temp_IntegrationMappingClass}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kosw39fb" targetId="kosw39f8" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$temp.temp_IntegrationMappingClass}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="kosw353r" targetId="kosw3485" type="containerLink"/>
                  </flow>
                  <flow id="kosw35iv">
                     <container id="kosw39k7" type="exclusive">
                        <title>Is IntegrationMapping_Shipping set?</title>
                        <flow id="kosw39k8">
                           <assignment id="kosw39k9">
                              <title>Add Shipping Country if lookup returns non null</title>
                              <operation source="field" to="temp.temp_SFDCShippingCountry">temp.temp_IntegrationMapping_Shipping.Mapping_Name__c</operation>
                              <operation source="formula" to="temp.shipToSubsidiary">
                                 <expression language="XQuery">if($Ship_to_Subsidiary__c='AppDynamics, Inc.') then '1' else if($Ship_to_Subsidiary__c='AppDynamics UK2') then '9' else ''</expression>
                              </operation>
                           </assignment>
                           <link id="kosw39ke" targetId="kosw39k7" type="containerLink"/>
                        </flow>
                        <flow id="kosw39ka">
                           <assignment id="kosw39kb">
                              <title>Add blank value to Shipping Country</title>
                              <operation source="constant" to="temp.temp_SFDCShippingCountry"/>
                              <operation source="constant" to="temp.shipToSubsidiary"/>
                           </assignment>
                           <link id="kosw39kf" targetId="kosw39k7" type="containerLink"/>
                        </flow>
                        <link id="kosw39kc" targetId="kosw39k8" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$temp.temp_IntegrationMapping_Shipping}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kosw39kd" targetId="kosw39ka" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$temp.temp_IntegrationMapping_Shipping}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="kosw35iw" targetId="kosw3485" type="containerLink"/>
                  </flow>
                  <flow id="kphd8ob6">
                     <container id="kphd8pnc" type="exclusive">
                        <title>thisShippingStateProvinceLookup</title>
                        <flow id="kphd8pnd">
                           <assignment id="kphd8pne">
                              <title>Assignment to shippingStateProvince</title>
                              <operation source="field" to="temp.shippingStateProvince">temp.thisShippingStateProvinceLookup.Mapping_Name__c</operation>
                           </assignment>
                           <link id="kphd8pnj" targetId="kphd8pnc" type="containerLink"/>
                        </flow>
                        <flow id="kphd8pnf">
                           <assignment id="kphd8png">
                              <title>Assignment to shippingStateProvince</title>
                              <operation source="field" to="temp.shippingStateProvince">ShippingState</operation>
                           </assignment>
                           <link id="kphd8pnk" targetId="kphd8pnc" type="containerLink"/>
                        </flow>
                        <link id="kphd8pnh" targetId="kphd8pnd" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$temp.thisShippingStateProvinceLookup}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kphd8pni" targetId="kphd8pnf" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$temp.thisShippingStateProvinceLookup}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="kphd8ob7" targetId="kosw3485" type="containerLink"/>
                  </flow>
                  <flow id="kosw35lb">
                     <container id="kosw3ah0" type="exclusive">
                        <title>Is temp_IntegrationMapping_Subsidiary set?</title>
                        <flow id="kosw3ah1">
                           <assignment id="kosw3ah2">
                              <title>Add internal ID of Subsidiary if lookup returns non null</title>
                              <operation source="field" to="temp.temp_SFDCSubsidiary">temp.temp_IntegrationMapping_Billing.Attribute_2__c</operation>
                              <operation source="field" to="temp.temp_NSTaxItem">temp.temp_IntegrationMapping_Subsidiary.Attribute_1__c</operation>
                           </assignment>
                           <link id="kosw3ah7" targetId="kosw3ah0" type="containerLink"/>
                        </flow>
                        <flow id="kosw3ah3">
                           <assignment id="kosw3ah4">
                              <title>Add blank to Subsidiary internal ID</title>
                              <operation source="constant" to="temp.temp_SFDCSubsidiary"/>
                              <operation source="constant" to="temp.temp_NSTaxItem"/>
                           </assignment>
                           <link id="kosw3ah8" targetId="kosw3ah0" type="containerLink"/>
                        </flow>
                        <link id="kosw3ah5" targetId="kosw3ah1" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$temp.temp_IntegrationMapping_Subsidiary}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kosw3ah6" targetId="kosw3ah3" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$temp.temp_IntegrationMapping_Subsidiary}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="kosw35lc" targetId="kosw3485" type="containerLink"/>
                  </flow>
                  <flow id="kosw3am2">
                     <container id="kosw3aqy" type="exclusive">
                        <title>Is temp_IntegrationMapping_Currency set?</title>
                        <flow id="kosw3aqz">
                           <assignment id="kosw3ar0">
                              <title>Add temp_OpptyCurrencyNSId if lookup returns non null</title>
                              <operation source="field" to="temp.temp_OpptyCurrencyNSId">temp.temp_IntegrationMapping_Currency.Mapping_Name__c</operation>
                           </assignment>
                           <link id="kosw3ar5" targetId="kosw3aqy" type="containerLink"/>
                        </flow>
                        <flow id="kosw3ar1">
                           <assignment id="kosw3ar2">
                              <title>Add blank to temp_OpptyCurrencyNSId</title>
                              <operation source="constant" to="temp.temp_OpptyCurrencyNSId"/>
                           </assignment>
                           <link id="kosw3ar6" targetId="kosw3aqy" type="containerLink"/>
                        </flow>
                        <link id="kosw3ar3" targetId="kosw3aqz" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$temp.temp_IntegrationMapping_Currency}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kosw3ar4" targetId="kosw3ar1" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$temp.temp_IntegrationMapping_Currency}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="kosw3am3" targetId="kosw3485" type="containerLink"/>
                  </flow>
                  <link id="kosw351b" targetId="kosw351c" type="containerLink"/>
                  <link id="kphd8o80" targetId="kphd8o81" type="containerLink"/>
                  <link id="kosw353p" targetId="kosw353q" type="containerLink"/>
                  <link id="kosw35iu" targetId="kosw35iv" type="containerLink"/>
                  <link id="kphd8ob5" targetId="kphd8ob6" type="containerLink"/>
                  <link id="kosw35la" targetId="kosw35lb" type="containerLink"/>
                  <link id="kosw3am1" targetId="kosw3am2" type="containerLink"/>
                  <link id="kphd8q6f" targetId="kphd8q6e"/>
               </container>
               <container id="jpyi36a3" type="exclusive">
                  <title>Parent billTo Doesn't Exist in Netsuite</title>
                  <flow id="jpyi36a4">
                     <link id="jpyi36ab" targetId="jpyi36a3" type="containerLink"/>
                  </flow>
                  <flow id="jpyi36a7">
                     <container id="kot2hz71" type="exclusive">
                        <title>Parent billTo Exist in Salesforce?</title>
                        <flow id="kot2hz72">
                           <subflow id="kot2hz73">
                              <title>billTo - SFDC To NS - Sales Order - Parent Customer</title>
                              <subflowGUID>1PcKhwyZKULh1N8w5Ux2yk</subflowGUID>
                              <subflowPath>SFDC_To_NS_-_Sales_Order_-_Parent_Customer</subflowPath>
                              <appliesTo>Salesforce:Account</appliesTo>
                              <appliesToDataName source="field">Bill_To__r.Account__r.ParentId</appliesToDataName>
                              <runForEach>false</runForEach>
                              <input>
                                 <parameter name="inputBillingSubsidiary" source="field" updatable="true">temp.temp_BillingSubsidiary</parameter>
                              </input>
                              <outputDef>
                                 <field name="out_parentCustomer_internalId" type="string">
                                    <options>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                                 <field name="out_parentCustomer_errorMessage" type="string">
                                    <options>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                              </outputDef>
                              <link id="kot2hz7e" targetId="kot2hz74"/>
                           </subflow>
                           <container id="kot2hz74" type="exclusive">
                              <title>billTo Parent Failed?</title>
                              <flow id="kot2hz75">
                                 <assignment id="kot2hz76">
                                    <title>Assignment to faultstring, exception - billTo</title>
                                    <operation source="formula" to="output.faultstring">
                                       <expression language="XQuery">fn:concat('billTo Parent Customer Creation Failed - ',$output.out_parentCustomer_errorMessage )</expression>
                                    </operation>
                                    <operation source="constant" to="temp.exception">Yes</operation>
                                    <link id="kot2hz7h" targetId="kot2hz77"/>
                                 </assignment>
                                 <jumpTo id="kot2hz77">
                                    <link id="kot2hz7i" targetId="jerndxei"/>
                                 </jumpTo>
                              </flow>
                              <flow id="kot2hz78">
                                 <assignment id="kot2hz79">
                                    <title>Assign billTo Parent to temp Field</title>
                                    <operation source="field" to="temp.temp_parentCustomer_billTo_internalId">output.out_parentCustomer_internalId</operation>
                                    <operation source="formula" to="output.out_parentCustomer_internalId">
                                       <expression language="XQuery">()</expression>
                                    </operation>
                                 </assignment>
                                 <link id="kot2hz7j" targetId="kot2hz74" type="containerLink"/>
                              </flow>
                              <link id="kot2hz7f" targetId="kot2hz75" type="containerLink">
                                 <condition source="formula">
                                    <function name="string-equals">
                                       <arg name="left">{$output.out_parentCustomer_internalId}</arg>
                                       <arg name="right"/>
                                    </function>
                                 </condition>
                              </link>
                              <link id="kot2hz7g" targetId="kot2hz78" type="containerLink"/>
                           </container>
                           <link id="kot2hz7d" targetId="kot2hz71" type="containerLink"/>
                        </flow>
                        <flow id="kot2hz7a">
                           <link id="kot2hz7k" targetId="kot2hz71" type="containerLink"/>
                        </flow>
                        <link id="kot2hz7b" targetId="kot2hz72" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$Bill_To__r.Account__r.ParentId}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kot2hz7c" targetId="kot2hz7a" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$Bill_To__r.Account__r.ParentId}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="jpyi36ad" targetId="jpyi36a3" type="containerLink"/>
                  </flow>
                  <link id="jpyi36a9" targetId="jpyi36a4" type="containerLink">
                     <condition source="formula">
                        <function name="true">
                           <arg name="field">{$temp.temp_ParentBillToExists}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="jpyi36aa" targetId="jpyi36a7" type="containerLink">
                     <condition source="formula">
                        <function name="false">
                           <arg name="field">{$temp.temp_ParentBillToExists}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="kq8jgut6" targetId="kq8jgut5"/>
               </container>
               <container id="jpyi36dj" type="exclusive">
                  <title>Parent shipTo Doesn't Exist in Netsuite?</title>
                  <flow id="jpyi36dk">
                     <link id="jpyi36dr" targetId="jpyi36dj" type="containerLink"/>
                  </flow>
                  <flow id="jpyi36dn">
                     <container id="kot2hzfk" type="exclusive">
                        <title>Parent shipTo Exist in Salesforce?</title>
                        <flow id="kot2hzfl">
                           <subflow id="kot2hzfm">
                              <title>shipTo - SFDC To NS - Sales Order - Parent Customer</title>
                              <subflowGUID>1PcKhwyZKULh1N8w5Ux2yk</subflowGUID>
                              <subflowPath>SFDC_To_NS_-_Sales_Order_-_Parent_Customer</subflowPath>
                              <appliesTo>Salesforce:Account</appliesTo>
                              <appliesToDataName source="field">Ship_To__r.Account__r.ParentId</appliesToDataName>
                              <runForEach>false</runForEach>
                              <input>
                                 <parameter name="inputBillingSubsidiary" source="field" updatable="true">temp.temp_BillingSubsidiary</parameter>
                              </input>
                              <outputDef>
                                 <field name="out_parentCustomer_internalId" type="string">
                                    <options>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                                 <field name="out_parentCustomer_errorMessage" type="string">
                                    <options>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                              </outputDef>
                              <link id="kot2hzfx" targetId="kot2hzfn"/>
                           </subflow>
                           <container id="kot2hzfn" type="exclusive">
                              <title>shipTo Parent Failed?</title>
                              <flow id="kot2hzfo">
                                 <assignment id="kot2hzfp">
                                    <title>Assignment to faultstring, exception - shipTo</title>
                                    <operation source="formula" to="output.faultstring">
                                       <expression language="XQuery">fn:concat('billTo Parent Customer Creation Failed - ',$output.out_parentCustomer_errorMessage )</expression>
                                    </operation>
                                    <operation source="constant" to="temp.exception">Yes</operation>
                                    <link id="kot2hzg0" targetId="kot2hzfq"/>
                                 </assignment>
                                 <jumpTo id="kot2hzfq">
                                    <link id="kot2hzg1" targetId="jerndxei"/>
                                 </jumpTo>
                              </flow>
                              <flow id="kot2hzfr">
                                 <assignment id="kot2hzfs">
                                    <title>Assign shipTo Parent to temp Field</title>
                                    <operation source="field" to="temp.temp_parentCustomer_shipTo_internalId">output.out_parentCustomer_internalId</operation>
                                 </assignment>
                                 <link id="kot2hzg2" targetId="kot2hzfn" type="containerLink"/>
                              </flow>
                              <link id="kot2hzfy" targetId="kot2hzfo" type="containerLink">
                                 <condition source="formula">
                                    <function name="string-equals">
                                       <arg name="left">{$output.out_parentCustomer_internalId}</arg>
                                       <arg name="right"/>
                                    </function>
                                 </condition>
                              </link>
                              <link id="kot2hzfz" targetId="kot2hzfr" type="containerLink"/>
                           </container>
                           <link id="kot2hzfw" targetId="kot2hzfk" type="containerLink"/>
                        </flow>
                        <flow id="kot2hzft">
                           <link id="kot2hzg3" targetId="kot2hzfk" type="containerLink"/>
                        </flow>
                        <link id="kot2hzfu" targetId="kot2hzfl" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$Ship_To__r.Account__r.ParentId}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kot2hzfv" targetId="kot2hzft" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$Ship_To__r.Account__r.ParentId}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="jpyi36dt" targetId="jpyi36dj" type="containerLink"/>
                  </flow>
                  <link id="jpyi36dp" targetId="jpyi36dk" type="containerLink">
                     <condition source="formula">
                        <function name="true">
                           <arg name="field">{$temp.temp_ParentShipToExists}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="jpyi36dq" targetId="jpyi36dn" type="containerLink">
                     <condition source="formula">
                        <function name="false">
                           <arg name="field">{$temp.temp_ParentShipToExists}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="jrc1ku9r" targetId="jrc1ku9q"/>
               </container>
               <container id="jrjor0hq" type="exclusive">
                  <title>Is Opp Contact set?</title>
                  <flow id="jrjor0hu">
                     <assignment id="jrjor0pg">
                        <title>Assign OppContact Email</title>
                        <operation source="field" to="temp.temp_OppContact_Email">temp.temp_SFDC_OppContactRole.Contact.Email</operation>
                     </assignment>
                     <link id="jrjor0hv" targetId="jrjor0hq" type="containerLink"/>
                  </flow>
                  <flow id="jrjor0hx">
                     <link id="jrjor0hy" targetId="jrjor0hq" type="containerLink"/>
                  </flow>
                  <link id="jrjor0ht" targetId="jrjor0hu" type="containerLink">
                     <condition source="formula">
                        <function name="set">
                           <arg name="field">{$temp.temp_SFDC_OppContactRole}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="jrjor0hw" targetId="jrjor0hx" type="containerLink">
                     <condition source="formula">
                        <function name="unset">
                           <arg name="field">{$temp.temp_SFDC_OppContactRole}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="jrjor0hs" targetId="j71bjwhs"/>
               </container>
               <container id="j71bjwkg" type="exclusive">
                  <title>sameAccount?</title>
                  <flow id="j71bjwkh">
                     <assignment id="j71bjwki">
                        <title>Assignment to sameAddress</title>
                        <operation source="formula" to="temp.sameAddress">
                           <expression language="XQuery">if ($Primary_Quote__r.SBQQ__PrimaryContact__r.Bill_To__c = $Primary_Quote__r.License_Delivery_Contact__r.Ship_To__c) 
then 'Yes' else 'No'</expression>
                        </operation>
                        <link id="j71bjwm3" targetId="j71bjwkj"/>
                     </assignment>
                     <container id="j71bjwkj" type="exclusive">
                        <title>sameAddress?</title>
                        <flow id="j71bjwkk">
                           <container id="j71bjwkl" type="exclusive">
                              <title>Bill to Account NetSuite Id Null?</title>
                              <flow id="j71bjwkm">
                                 <service id="kot2hzr8">
                                    <title>Update Bill-to Customer</title>
                                    <serviceName>NetSuite-AppDynamics:Update Customer Info</serviceName>
                                    <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                                    <serviceInput>
                                       <parameter name="InternalID" source="formula">
                                          <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') then $Bill_To__r.Account__r.NetSuite_Id__c 
else $Bill_To__r.Account__r.UK2_Netsuite_ID__c</expression>
                                       </parameter>
                                       <parameter name="billingAddress" source="field">temp.thisBillingAddress</parameter>
                                       <parameter name="parentNSId" source="formula">
                                          <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') then (if(fn:string-length($Bill_To__r.Account__r.Parent.NetSuite_Id__c) &gt; 0) then $Bill_To__r.Account__r.Parent.NetSuite_Id__c else '') else  (if(fn:string-length($Bill_To__r.Account__r.Parent.UK2_Netsuite_ID__c) &gt; 0) then $Bill_To__r.Account__r.Parent.UK2_Netsuite_ID__c else '')  
 </expression>
                                       </parameter>
                                       <parameter name="currencyNSId" source="field" updatable="true">temp.temp_OpptyCurrencyNSId</parameter>
                                       <parameter name="industry" source="formula">
                                          <expression language="XQuery">$Bill_To__r.Account__r.Master_Industry__c</expression>
                                       </parameter>
                                       <parameter name="email" source="formula">
                                          <expression language="XQuery">if(fn:string-length($output.email)&gt;0) then '' else if($BillToContact.Email!='') then $BillToContact.Email else $temp.temp_OppContact_Email</expression>
                                       </parameter>
                                       <parameter name="Cisco_PartyId" source="field" updatable="true">Bill_To__r.Account__r.Cisco_Party_ID__c</parameter>
                                    </serviceInput>
                                    <link id="kot2hzx1" targetId="kot2hzwr"/>
                                 </service>
                                 <container id="kot2hzwr" type="exclusive">
                                    <title>isUpdateCRSuccess</title>
                                    <flow id="kot2hzws">
                                       <link id="kot2hzwy" targetId="kot2hzwr" type="containerLink"/>
                                    </flow>
                                    <flow id="kot2hzwt">
                                       <assignment id="kot2hzwu">
                                          <title>Assignment to faultstring</title>
                                          <operation source="constant" to="output.faultstring">Customer not found for update at update bill-to customer step</operation>
                                          <operation source="constant" to="temp.exception">Yes</operation>
                                          <link id="kot2hzwz" targetId="kot2hzwv"/>
                                       </assignment>
                                       <jumpTo id="kot2hzwv">
                                          <link id="kot2hzx0" targetId="jerndxei"/>
                                       </jumpTo>
                                    </flow>
                                    <link id="kot2hzww" targetId="kot2hzws" type="containerLink">
                                       <condition source="formula">
                                          <function name="true">
                                             <arg name="field">{$output.isUpdateCRSuccess}</arg>
                                          </function>
                                       </condition>
                                    </link>
                                    <link id="kot2hzwx" targetId="kot2hzwt" type="containerLink">
                                       <condition source="formula">
                                          <function name="false">
                                             <arg name="field">{$output.isUpdateCRSuccess}</arg>
                                          </function>
                                       </condition>
                                    </link>
                                 </container>
                                 <link id="j71bjwm9" targetId="j71bjwkl" type="containerLink"/>
                              </flow>
                              <flow id="j71bjwku">
                                 <service id="kot2i029">
                                    <title>Create Bill-to Customer</title>
                                    <serviceName>NetSuite-AppDynamics:Create Customer</serviceName>
                                    <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                                    <serviceInput>
                                       <parameter name="companyName" source="field" updatable="true">Bill_To__r.Account__r.Name</parameter>
                                       <parameter name="phone" source="formula">
                                          <expression language="XQuery">if (fn:string-length($Bill_To__r.Account__r.Phone) &gt; 5) then $Bill_To__r.Account__r.Phone else ''</expression>
                                       </parameter>
                                       <parameter name="email" source="formula">
                                          <expression language="XQuery">if($BillToContact.Email='') then $temp.temp_OppContact_Email else $BillToContact.Email</expression>
                                       </parameter>
                                       <parameter name="subsidiary" source="field" updatable="true">temp.temp_BillingSubsidiary</parameter>
                                       <parameter name="url" source="formula">
                                          <expression language="XQuery">if(exists($Bill_To__r.Account__r.Website)) 
then
(if(fn:substring($Bill_To__r.Account__r.Website, 1,7) eq 'http://')
then $Bill_To__r.Account__r.Website
else
fn:concat("http://", $Bill_To__r.Account__r.Website))
else
()
</expression>
                                       </parameter>
                                       <parameter name="billingAddress" source="field">temp.thisBillingAddress</parameter>
                                       <parameter name="accountID" source="field">Bill_To__r.Account__r.Account_ID__c</parameter>
                                       <parameter name="parentNSId" source="formula">
                                          <expression language="XQuery">if(fn:string-length($Bill_To__r.Account__r.Parent.NetSuite_Id__c )&gt;0) then $Bill_To__r.Account__r.Parent.NetSuite_Id__c else  $temp.temp_parentCustomer_billTo_internalId </expression>
                                       </parameter>
                                       <parameter name="industry" source="formula">
                                          <expression language="XQuery">$Bill_To__r.Account__r.Master_Industry__c</expression>
                                       </parameter>
                                       <parameter name="Cisco_PartyId" source="field" updatable="true">Bill_To__r.Account__r.Cisco_Party_ID__c</parameter>
                                    </serviceInput>
                                    <link id="kot2i084" targetId="kot2i07t"/>
                                 </service>
                                 <container id="kot2i07t" type="exclusive">
                                    <title>isCreateCRSuccess</title>
                                    <flow id="kot2i07u">
                                       <container id="koyr4xre" type="exclusive">
                                          <title>Check Billing Subsidiary and update appropriate field</title>
                                          <flow id="koyr4xrf">
                                             <assignment id="koyr4xrg">
                                                <title>Assign new NetSuite ID to LLCNetSuiteID 1</title>
                                                <operation source="field" to="temp.NetSuiteId_Customer">output.NetSuite Customer ID</operation>
                                                <operation source="field" to="Bill_To__r.Account__r.NetSuite_Id__c">output.NetSuite Customer ID</operation>
                                             </assignment>
                                             <link id="koyr4xrl" targetId="koyr4xre" type="containerLink"/>
                                          </flow>
                                          <flow id="koyr4xrh">
                                             <assignment id="koyr4xri">
                                                <title>Assign new NetSuite ID to UK2NetSuiteID 1</title>
                                                <operation source="field" to="temp.NetSuiteId_Customer">output.NetSuite Customer ID</operation>
                                                <operation source="field" to="Bill_To__r.Account__r.UK2_Netsuite_ID__c">output.NetSuite Customer ID</operation>
                                             </assignment>
                                             <link id="koyr4xrm" targetId="koyr4xre" type="containerLink"/>
                                          </flow>
                                          <link id="koyr4xrj" targetId="koyr4xrf" type="containerLink">
                                             <condition source="formula">
                                                <function name="string-equals">
                                                   <arg name="left">{$temp.temp_BillingSubsidiary}</arg>
                                                   <arg name="right">1</arg>
                                                </function>
                                             </condition>
                                          </link>
                                          <link id="koyr4xrk" targetId="koyr4xrh" type="containerLink"/>
                                       </container>
                                       <link id="kot2i081" targetId="kot2i07t" type="containerLink"/>
                                    </flow>
                                    <flow id="kot2i07w">
                                       <assignment id="kot2i07x">
                                          <title>Assign Exception</title>
                                          <operation source="constant" to="temp.exception">Yes</operation>
                                          <link id="kot2i082" targetId="kot2i07y"/>
                                       </assignment>
                                       <jumpTo id="kot2i07y">
                                          <link id="kot2i083" targetId="jerndxei"/>
                                       </jumpTo>
                                    </flow>
                                    <link id="kot2i07z" targetId="kot2i07u" type="containerLink">
                                       <condition source="formula">
                                          <function name="string-equals">
                                             <arg name="left">{$output.isCreateCRSuccess}</arg>
                                             <arg name="right">true</arg>
                                          </function>
                                       </condition>
                                    </link>
                                    <link id="kot2i080" targetId="kot2i07w" type="containerLink"/>
                                 </container>
                                 <link id="j71bjwmg" targetId="j71bjwkl" type="containerLink"/>
                              </flow>
                              <link id="j71bjwm7" targetId="j71bjwkm" type="containerLink">
                                 <condition source="formula">
                                    <function name="true">
                                       <arg name="field">{$temp.temp_BillToExists}</arg>
                                    </function>
                                 </condition>
                              </link>
                              <link id="j71bjwm8" targetId="j71bjwku" type="containerLink">
                                 <condition source="formula">
                                    <function name="false">
                                       <arg name="field">{$temp.temp_BillToExists}</arg>
                                    </function>
                                 </condition>
                              </link>
                           </container>
                           <link id="j71bjwm6" targetId="j71bjwkj" type="containerLink"/>
                        </flow>
                        <flow id="j71bjwkw">
                           <container id="j71bjwkx" type="exclusive">
                              <title>Bill to Account NetSuite Id Null?</title>
                              <flow id="j71bjwky">
                                 <service id="koyr55q0">
                                    <title>Update Bill-to/Ship-to Customer</title>
                                    <serviceName>NetSuite-AppDynamics:Update Customer Info</serviceName>
                                    <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                                    <serviceInput>
                                       <parameter name="InternalID" source="formula">
                                          <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') then $Bill_To__r.Account__r.NetSuite_Id__c 
else $Bill_To__r.Account__r.UK2_Netsuite_ID__c</expression>
                                       </parameter>
                                       <parameter name="billingAddress" source="field">temp.thisBillingAddress</parameter>
                                       <parameter name="shippingAddress" source="field">temp.thisShippingAddress</parameter>
                                       <parameter name="parentNSId" source="formula">
                                          <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') then (if(fn:string-length($Bill_To__r.Account__r.Parent.NetSuite_Id__c) &gt; 0) then $Bill_To__r.Account__r.Parent.NetSuite_Id__c else '') else  (if(fn:string-length($Bill_To__r.Account__r.Parent.UK2_Netsuite_ID__c) &gt; 0) then $Bill_To__r.Account__r.Parent.UK2_Netsuite_ID__c else '')</expression>
                                       </parameter>
                                       <parameter name="currencyNSId" source="field" updatable="true">temp.temp_OpptyCurrencyNSId</parameter>
                                       <parameter name="industry" source="formula">
                                          <expression language="XQuery">$Ship_To__r.Account__r.Master_Industry__c</expression>
                                       </parameter>
                                       <parameter name="email" source="formula">
                                          <expression language="XQuery">if(fn:string-length($output.email)&gt;0) then '' else if($BillToContact.Email!='') then $BillToContact.Email else $temp.temp_OppContact_Email</expression>
                                       </parameter>
                                       <parameter name="Cisco_PartyId" source="field" updatable="true">Bill_To__r.Account__r.Cisco_Party_ID__c</parameter>
                                    </serviceInput>
                                    <link id="koyr55vs" targetId="koyr55vi"/>
                                 </service>
                                 <container id="koyr55vi" type="exclusive">
                                    <title>isUpdateCRSuccess</title>
                                    <flow id="koyr55vj">
                                       <link id="koyr55vp" targetId="koyr55vi" type="containerLink"/>
                                    </flow>
                                    <flow id="koyr55vk">
                                       <assignment id="koyr55vl">
                                          <title>Assignment to faultstring</title>
                                          <operation source="constant" to="output.faultstring">Customer not found for update at update bill-to/ship-to step</operation>
                                          <operation source="constant" to="temp.exception">Yes</operation>
                                          <link id="koyr55vq" targetId="koyr55vm"/>
                                       </assignment>
                                       <jumpTo id="koyr55vm">
                                          <link id="koyr55vr" targetId="jerndxei"/>
                                       </jumpTo>
                                    </flow>
                                    <link id="koyr55vn" targetId="koyr55vj" type="containerLink">
                                       <condition source="formula">
                                          <function name="true">
                                             <arg name="field">{$output.isUpdateCRSuccess}</arg>
                                          </function>
                                       </condition>
                                    </link>
                                    <link id="koyr55vo" targetId="koyr55vk" type="containerLink">
                                       <condition source="formula">
                                          <function name="false">
                                             <arg name="field">{$output.isUpdateCRSuccess}</arg>
                                          </function>
                                       </condition>
                                    </link>
                                 </container>
                                 <link id="j71bjwmk" targetId="j71bjwkx" type="containerLink"/>
                              </flow>
                              <flow id="j71bjwl6">
                                 <service id="koyr560z">
                                    <title>Create Bill-to Customer with different address</title>
                                    <serviceName>NetSuite-AppDynamics:Create Customer</serviceName>
                                    <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                                    <serviceInput>
                                       <parameter name="companyName" source="field" updatable="true">Bill_To__r.Account__r.Name</parameter>
                                       <parameter name="phone" source="formula">
                                          <expression language="XQuery">if (fn:string-length($Bill_To__r.Account__r.Phone) &gt; 5) then $Bill_To__r.Account__r.Phone else ''</expression>
                                       </parameter>
                                       <parameter name="email" source="formula">
                                          <expression language="XQuery">if($BillToContact.Email='') then $temp.temp_OppContact_Email else $BillToContact.Email</expression>
                                       </parameter>
                                       <parameter name="subsidiary" source="field" updatable="true">temp.temp_BillingSubsidiary</parameter>
                                       <parameter name="url" source="formula">
                                          <expression language="XQuery">if(exists($Bill_To__r.Account__r.Website)) 
then
(if(fn:substring($Bill_To__r.Account__r.Website, 1,7) eq 'http://')
then $Bill_To__r.Account__r.Website
else
fn:concat("http://", $Bill_To__r.Account__r.Website))
else
()
</expression>
                                       </parameter>
                                       <parameter name="billingAddress" source="field">temp.thisBillingAddress</parameter>
                                       <parameter name="shippingAddress" source="field">temp.thisShippingAddress</parameter>
                                       <parameter name="accountID" source="field">Bill_To__r.Account__r.Account_ID__c</parameter>
                                       <parameter name="parentNSId" source="formula">
                                          <expression language="XQuery">if(fn:string-length($Bill_To__r.Account__r.Parent.NetSuite_Id__c )&gt;0) then $Bill_To__r.Account__r.Parent.NetSuite_Id__c else  $temp.temp_parentCustomer_billTo_internalId </expression>
                                       </parameter>
                                       <parameter name="industry" source="formula">
                                          <expression language="XQuery">$Bill_To__r.Account__r.Master_Industry__c</expression>
                                       </parameter>
                                       <parameter name="Cisco_PartyId" source="field" updatable="true">Bill_To__r.Account__r.Cisco_Party_ID__c</parameter>
                                    </serviceInput>
                                    <link id="koyr5672" targetId="koyr566j"/>
                                 </service>
                                 <container id="koyr566j" type="exclusive">
                                    <title>isCreateCRSuccess</title>
                                    <flow id="koyr566k">
                                       <container id="koyr566l" type="exclusive">
                                          <title>Check Billing Subsidiary and update appropriate field</title>
                                          <flow id="koyr566m">
                                             <assignment id="koyr566n">
                                                <title>Assign new NetSuite ID to LLCNetSuiteID 2</title>
                                                <operation source="field" to="temp.NetSuiteId_Customer">output.NetSuite Customer ID</operation>
                                                <operation source="field" to="Bill_To__r.Account__r.NetSuite_Id__c">output.NetSuite Customer ID</operation>
                                             </assignment>
                                             <link id="koyr566y" targetId="koyr566l" type="containerLink"/>
                                          </flow>
                                          <flow id="koyr566o">
                                             <assignment id="koyr566p">
                                                <title>Assign new NetSuite ID to UK2NetSuiteID 2</title>
                                                <operation source="field" to="temp.NetSuiteId_Customer">output.NetSuite Customer ID</operation>
                                                <operation source="field" to="Bill_To__r.Account__r.UK2_Netsuite_ID__c">output.NetSuite Customer ID</operation>
                                             </assignment>
                                             <link id="koyr566z" targetId="koyr566l" type="containerLink"/>
                                          </flow>
                                          <link id="koyr566w" targetId="koyr566m" type="containerLink">
                                             <condition source="formula">
                                                <function name="string-equals">
                                                   <arg name="left">{$temp.temp_BillingSubsidiary}</arg>
                                                   <arg name="right">1</arg>
                                                </function>
                                             </condition>
                                          </link>
                                          <link id="koyr566x" targetId="koyr566o" type="containerLink"/>
                                       </container>
                                       <link id="koyr566v" targetId="koyr566j" type="containerLink"/>
                                    </flow>
                                    <flow id="koyr566q">
                                       <assignment id="koyr566r">
                                          <title>Assign Exception</title>
                                          <operation source="constant" to="temp.exception">Yes</operation>
                                          <link id="koyr5670" targetId="koyr566s"/>
                                       </assignment>
                                       <jumpTo id="koyr566s">
                                          <link id="koyr5671" targetId="jerndxei"/>
                                       </jumpTo>
                                    </flow>
                                    <link id="koyr566t" targetId="koyr566k" type="containerLink">
                                       <condition source="formula">
                                          <function name="string-equals">
                                             <arg name="left">{$output.isCreateCRSuccess}</arg>
                                             <arg name="right">true</arg>
                                          </function>
                                       </condition>
                                    </link>
                                    <link id="koyr566u" targetId="koyr566q" type="containerLink"/>
                                 </container>
                                 <link id="j71bjwmr" targetId="j71bjwkx" type="containerLink"/>
                              </flow>
                              <link id="j71bjwmi" targetId="j71bjwky" type="containerLink">
                                 <condition source="formula">
                                    <function name="true">
                                       <arg name="field">{$temp.temp_BillToExists}</arg>
                                    </function>
                                 </condition>
                              </link>
                              <link id="j71bjwmj" targetId="j71bjwl6" type="containerLink">
                                 <condition source="formula">
                                    <function name="false">
                                       <arg name="field">{$temp.temp_BillToExists}</arg>
                                    </function>
                                 </condition>
                              </link>
                           </container>
                           <link id="j71bjwmh" targetId="j71bjwkj" type="containerLink"/>
                        </flow>
                        <link id="j71bjwm4" targetId="j71bjwkk" type="containerLink">
                           <condition source="formula">
                              <function name="string-equals">
                                 <arg name="left">{$temp.sameAddress}</arg>
                                 <arg name="right">Yes</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="j71bjwm5" targetId="j71bjwkw" type="containerLink"/>
                     </container>
                     <link id="j71bjwm2" targetId="j71bjwkg" type="containerLink"/>
                  </flow>
                  <flow id="j71bjwl8">
                     <container id="j71bjwl9" type="exclusive">
                        <title>Bill to Account NetSuite Id Null?</title>
                        <flow id="j71bjwla">
                           <service id="koyr4x86">
                              <title>Update Bill-to Customer</title>
                              <serviceName>NetSuite-AppDynamics:Update Customer Info</serviceName>
                              <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                              <serviceInput>
                                 <parameter name="InternalID" source="formula">
                                    <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') then $Bill_To__r.Account__r.NetSuite_Id__c 
else $Bill_To__r.Account__r.UK2_Netsuite_ID__c</expression>
                                 </parameter>
                                 <parameter name="billingAddress" source="field">temp.thisBillingAddress</parameter>
                                 <parameter name="parentNSId" source="formula">
                                    <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') then (if(fn:string-length($Bill_To__r.Account__r.Parent.NetSuite_Id__c) &gt; 0) then $Bill_To__r.Account__r.Parent.NetSuite_Id__c else '') else  (if(fn:string-length($Bill_To__r.Account__r.Parent.UK2_Netsuite_ID__c) &gt; 0) then $Bill_To__r.Account__r.Parent.UK2_Netsuite_ID__c else '')</expression>
                                 </parameter>
                                 <parameter name="currencyNSId" source="field" updatable="true">temp.temp_OpptyCurrencyNSId</parameter>
                                 <parameter name="industry" source="formula">
                                    <expression language="XQuery">$Bill_To__r.Account__r.Master_Industry__c</expression>
                                 </parameter>
                                 <parameter name="email" source="formula">
                                    <expression language="XQuery">if(fn:string-length($output.email)&gt;0) then '' else if($BillToContact.Email!='') then $BillToContact.Email else $temp.temp_OppContact_Email</expression>
                                 </parameter>
                                 <parameter name="Cisco_PartyId" source="field" updatable="true">Bill_To__r.Account__r.Cisco_Party_ID__c</parameter>
                              </serviceInput>
                              <link id="koyr4xe2" targetId="koyr4xds"/>
                           </service>
                           <container id="koyr4xds" type="exclusive">
                              <title>isUpdateCRSuccess</title>
                              <flow id="koyr4xdt">
                                 <link id="koyr4xdz" targetId="koyr4xds" type="containerLink"/>
                              </flow>
                              <flow id="koyr4xdu">
                                 <assignment id="koyr4xdv">
                                    <title>Assignment to faultstring</title>
                                    <operation source="constant" to="output.faultstring">Customer not found for update at update bill-to step</operation>
                                    <operation source="constant" to="temp.exception">Yes</operation>
                                    <link id="koyr4xe0" targetId="koyr4xdw"/>
                                 </assignment>
                                 <jumpTo id="koyr4xdw">
                                    <link id="koyr4xe1" targetId="jerndxei"/>
                                 </jumpTo>
                              </flow>
                              <link id="koyr4xdx" targetId="koyr4xdt" type="containerLink">
                                 <condition source="formula">
                                    <function name="true">
                                       <arg name="field">{$output.isUpdateCRSuccess}</arg>
                                    </function>
                                 </condition>
                              </link>
                              <link id="koyr4xdy" targetId="koyr4xdu" type="containerLink">
                                 <condition source="formula">
                                    <function name="false">
                                       <arg name="field">{$output.isUpdateCRSuccess}</arg>
                                    </function>
                                 </condition>
                              </link>
                           </container>
                           <link id="j71bjwmw" targetId="j71bjwl9" type="containerLink"/>
                        </flow>
                        <flow id="j71bjwli">
                           <service id="koyr4wxf">
                              <title>Create Bill-to Customer</title>
                              <serviceName>NetSuite-AppDynamics:Create Customer</serviceName>
                              <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                              <serviceInput>
                                 <parameter name="companyName" source="field" updatable="true">Bill_To__r.Account__r.Name</parameter>
                                 <parameter name="phone" source="formula">
                                    <expression language="XQuery">if (fn:string-length($Bill_To__r.Account__r.Phone) &gt; 5) then $Bill_To__r.Account__r.Phone else ''</expression>
                                 </parameter>
                                 <parameter name="email" source="formula">
                                    <expression language="XQuery">if($BillToContact.Email='') then $temp.temp_OppContact_Email else $BillToContact.Email</expression>
                                 </parameter>
                                 <parameter name="subsidiary" source="field" updatable="true">temp.temp_BillingSubsidiary</parameter>
                                 <parameter name="url" source="formula">
                                    <expression language="XQuery">if(exists($Bill_To__r.Account__r.Website)) 
then
(if(fn:substring($Bill_To__r.Account__r.Website, 1,7) eq 'http://')
then $Bill_To__r.Account__r.Website
else
fn:concat("http://", $Bill_To__r.Account__r.Website))
else
()
</expression>
                                 </parameter>
                                 <parameter name="billingAddress" source="field">temp.thisBillingAddress</parameter>
                                 <parameter name="accountID" source="field">Bill_To__r.Account__r.Account_ID__c</parameter>
                                 <parameter name="parentNSId" source="formula">
                                    <expression language="XQuery">if(fn:string-length($Bill_To__r.Account__r.Parent.NetSuite_Id__c )&gt;0) then $Bill_To__r.Account__r.Parent.NetSuite_Id__c else  $temp.temp_parentCustomer_billTo_internalId </expression>
                                 </parameter>
                                 <parameter name="industry" source="formula">
                                    <expression language="XQuery">$Bill_To__r.Account__r.Master_Industry__c</expression>
                                 </parameter>
                                 <parameter name="Cisco_PartyId" source="field" updatable="true">Bill_To__r.Account__r.Cisco_Party_ID__c</parameter>
                              </serviceInput>
                              <link id="koyr4x3a" targetId="koyr4x2z"/>
                           </service>
                           <container id="koyr4x2z" type="exclusive">
                              <title>isCreateCRSuccess</title>
                              <flow id="koyr4x30">
                                 <container id="koyr532p" type="exclusive">
                                    <title>Check Billing Subsidiary and update appropriate field</title>
                                    <flow id="koyr532q">
                                       <assignment id="koyr532r">
                                          <title>Assign new NetSuite ID to LLCNetSuiteID</title>
                                          <operation source="field" to="temp.NetSuiteId_Customer">output.NetSuite Customer ID</operation>
                                          <operation source="field" to="Bill_To__r.Account__r.NetSuite_Id__c">output.NetSuite Customer ID</operation>
                                       </assignment>
                                       <link id="koyr532w" targetId="koyr532p" type="containerLink"/>
                                    </flow>
                                    <flow id="koyr532s">
                                       <assignment id="koyr532t">
                                          <title>Assign new NetSuite ID to UK2NetSuiteID</title>
                                          <operation source="field" to="temp.NetSuiteId_Customer">output.NetSuite Customer ID</operation>
                                          <operation source="field" to="Bill_To__r.Account__r.UK2_Netsuite_ID__c">output.NetSuite Customer ID</operation>
                                       </assignment>
                                       <link id="koyr532x" targetId="koyr532p" type="containerLink"/>
                                    </flow>
                                    <link id="koyr532u" targetId="koyr532q" type="containerLink">
                                       <condition source="formula">
                                          <function name="string-equals">
                                             <arg name="left">{$temp.temp_BillingSubsidiary}</arg>
                                             <arg name="right">1</arg>
                                          </function>
                                       </condition>
                                    </link>
                                    <link id="koyr532v" targetId="koyr532s" type="containerLink"/>
                                 </container>
                                 <link id="koyr4x37" targetId="koyr4x2z" type="containerLink"/>
                              </flow>
                              <flow id="koyr4x32">
                                 <assignment id="koyr4x33">
                                    <title>Assign Exception</title>
                                    <operation source="constant" to="temp.exception">Yes</operation>
                                    <link id="koyr4x38" targetId="koyr4x34"/>
                                 </assignment>
                                 <jumpTo id="koyr4x34">
                                    <link id="koyr4x39" targetId="jerndxei"/>
                                 </jumpTo>
                              </flow>
                              <link id="koyr4x35" targetId="koyr4x30" type="containerLink">
                                 <condition source="formula">
                                    <function name="string-equals">
                                       <arg name="left">{$output.isCreateCRSuccess}</arg>
                                       <arg name="right">true</arg>
                                    </function>
                                 </condition>
                              </link>
                              <link id="koyr4x36" targetId="koyr4x32" type="containerLink"/>
                           </container>
                           <link id="j71bjwn3" targetId="j71bjwl9" type="containerLink"/>
                        </flow>
                        <link id="j71bjwmt" targetId="j71bjwla" type="containerLink">
                           <condition source="formula">
                              <function name="true">
                                 <arg name="field">{$temp.temp_BillToExists}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="j71bjwmv" targetId="j71bjwli" type="containerLink">
                           <condition source="formula">
                              <function name="false">
                                 <arg name="field">{$temp.temp_BillToExists}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="kq8jgxuj" targetId="kq8jgxui"/>
                     </container>
                     <container id="j71bjwlk" type="exclusive">
                        <title>Ship To Account NetSuite Id Null?</title>
                        <flow id="j71bjwll">
                           <container id="kq6z7a4m" type="exclusive">
                              <title>If ShipTo Parent was created, then send parent info in the update</title>
                              <flow id="kq6z7a4p">
                                 <service id="kq6z7azm">
                                    <title>Update ShipTo customer without Parent info</title>
                                    <serviceName>NetSuite-AppDynamics:Update Customer Info</serviceName>
                                    <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                                    <serviceInput>
                                       <parameter name="InternalID" source="formula">
                                          <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') 
	then (if(fn:string-length($Ship_To__r.Account__r.NetSuite_Id__c) &gt; 0) 
		then $Ship_To__r.Account__r.NetSuite_Id__c 
		else $Ship_To__r.Account__r.UK2_Netsuite_ID__c) 
	else  (if(fn:string-length($Ship_To__r.Account__r.UK2_Netsuite_ID__c) &gt; 0) 
		then $Ship_To__r.Account__r.UK2_Netsuite_ID__c
		else $Ship_To__r.Account__r.NetSuite_Id__c)</expression>
                                       </parameter>
                                       <parameter name="shippingAddress" source="field">temp.thisShippingAddress</parameter>
                                       <parameter name="industry" source="formula">
                                          <expression language="XQuery">$Ship_To__r.Account__r.Master_Industry__c</expression>
                                       </parameter>
                                       <parameter name="email" source="formula">
                                          <expression language="XQuery">if(fn:string-length($output.email)&gt;0) then '' else if($ShipToContact.Email!='') then $ShipToContact.Email else $temp.temp_OppContact_Email</expression>
                                       </parameter>
                                       <parameter name="Cisco_PartyId" source="field" updatable="true">Ship_To__r.Account__r.Cisco_Party_ID__c</parameter>
                                    </serviceInput>
                                 </service>
                                 <link id="kq6z7a4q" targetId="kq6z7a4m" type="containerLink"/>
                              </flow>
                              <flow id="kq6z7a4s">
                                 <service id="kq6z7al4">
                                    <title>Update ShipTo customer with Parent info</title>
                                    <serviceName>NetSuite-AppDynamics:Update Customer Info</serviceName>
                                    <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                                    <serviceInput>
                                       <parameter name="InternalID" source="formula">
                                          <expression language="XQuery">if($temp.temp_BillingSubsidiary = '1') 
	then (if(fn:string-length($Ship_To__r.Account__r.NetSuite_Id__c) &gt; 0) 
		then $Ship_To__r.Account__r.NetSuite_Id__c 
		else $Ship_To__r.Account__r.UK2_Netsuite_ID__c) 
	else  (if(fn:string-length($Ship_To__r.Account__r.UK2_Netsuite_ID__c) &gt; 0) 
		then $Ship_To__r.Account__r.UK2_Netsuite_ID__c
		else $Ship_To__r.Account__r.NetSuite_Id__c)</expression>
                                       </parameter>
                                       <parameter name="shippingAddress" source="field">temp.thisShippingAddress</parameter>
                                       <parameter name="parentNSId" source="field" updatable="true">temp.temp_parentCustomer_shipTo_internalId</parameter>
                                       <parameter name="industry" source="formula">
                                          <expression language="XQuery">$Ship_To__r.Account__r.Master_Industry__c</expression>
                                       </parameter>
                                       <parameter name="email" source="formula">
                                          <expression language="XQuery">if(fn:string-length($output.email)&gt;0) then '' else if($ShipToContact.Email!='') then $ShipToContact.Email else $temp.temp_OppContact_Email</expression>
                                       </parameter>
                                       <parameter name="Cisco_PartyId" source="field" updatable="true">Ship_To__r.Account__r.Cisco_Party_ID__c</parameter>
                                    </serviceInput>
                                 </service>
                                 <link id="kq6z7a4t" targetId="kq6z7a4m" type="containerLink"/>
                              </flow>
                              <link id="kq6z7a4o" targetId="kq6z7a4p" type="containerLink">
                                 <condition source="formula">
                                    <function name="string-equals">
                                       <arg name="left">{$temp.temp_parentCustomer_shipTo_internalId}</arg>
                                       <arg name="right"/>
                                    </function>
                                 </condition>
                              </link>
                              <link id="kq6z7a4r" targetId="kq6z7a4s" type="containerLink"/>
                              <link id="kq6z7bte" targetId="kpwwep7n"/>
                           </container>
                           <container id="kpwwep7n" type="exclusive">
                              <title>is ShipTo Customer Update Successful?</title>
                              <flow id="kpwwep7o">
                                 <link id="kpwwep7u" targetId="kpwwep7n" type="containerLink"/>
                              </flow>
                              <flow id="kpwwep7p">
                                 <assignment id="kpwwep7q">
                                    <title>Assignment to faultstring</title>
                                    <operation source="constant" to="output.faultstring">Customer not found for update</operation>
                                    <operation source="constant" to="temp.exception">Yes</operation>
                                    <link id="kpwwep7v" targetId="kpwwep7r"/>
                                 </assignment>
                                 <jumpTo id="kpwwep7r">
                                    <link id="kpwwep7w" targetId="jerndxei"/>
                                 </jumpTo>
                              </flow>
                              <link id="kpwwep7s" targetId="kpwwep7o" type="containerLink">
                                 <condition source="formula">
                                    <function name="true">
                                       <arg name="field">{$output.isUpdateCRSuccess}</arg>
                                    </function>
                                 </condition>
                              </link>
                              <link id="kpwwep7t" targetId="kpwwep7p" type="containerLink">
                                 <condition source="formula">
                                    <function name="false">
                                       <arg name="field">{$output.isUpdateCRSuccess}</arg>
                                    </function>
                                 </condition>
                              </link>
                           </container>
                           <link id="j71bjwn6" targetId="j71bjwlk" type="containerLink"/>
                        </flow>
                        <flow id="j71bjwlt">
                           <service id="koyr56cp">
                              <title>Create Ship-to Customer</title>
                              <serviceName>NetSuite-AppDynamics:Create Customer</serviceName>
                              <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                              <serviceInput>
                                 <parameter name="companyName" source="field" updatable="true">Ship_To__r.Account__r.Name</parameter>
                                 <parameter name="phone" source="formula">
                                    <expression language="XQuery">if (fn:string-length($Ship_To__r.Account__r.Phone) &gt; 5) then $Ship_To__r.Account__r.Phone else ''</expression>
                                 </parameter>
                                 <parameter name="email" source="formula">
                                    <expression language="XQuery">if($ShipToContact.Email='') then $temp.temp_OppContact_Email else $ShipToContact.Email</expression>
                                 </parameter>
                                 <parameter name="subsidiary" source="field" updatable="true">temp.temp_BillingSubsidiary</parameter>
                                 <parameter name="url" source="formula">
                                    <expression language="XQuery">if(exists($Ship_To__r.Account__r.Website)) 
then
(if(fn:substring($Ship_To__r.Account__r.Website, 1,7) eq 'http://')
then $Ship_To__r.Account__r.Website
else
fn:concat("http://", $Ship_To__r.Account__r.Website))
else
()
</expression>
                                 </parameter>
                                 <parameter name="shippingAddress" source="field">temp.thisShippingAddress</parameter>
                                 <parameter name="accountID" source="field">Ship_To__r.Account__r.Account_ID__c</parameter>
                                 <parameter name="parentNSId" source="formula">
                                    <expression language="XQuery">if(fn:string-length($Ship_To__r.Account__r.Parent.NetSuite_Id__c )&gt;0) then $Ship_To__r.Account__r.Parent.NetSuite_Id__c else  $temp.temp_parentCustomer_shipTo_internalId</expression>
                                 </parameter>
                                 <parameter name="industry" source="formula">
                                    <expression language="XQuery">$Ship_To__r.Account__r.Master_Industry__c </expression>
                                 </parameter>
                                 <parameter name="Cisco_PartyId" source="field" updatable="true">Ship_To__r.Account__r.Cisco_Party_ID__c</parameter>
                              </serviceInput>
                              <link id="koyr56tp" targetId="koyr56t6"/>
                           </service>
                           <container id="koyr56t6" type="exclusive">
                              <title>isCreateCRSuccess</title>
                              <flow id="koyr56t7">
                                 <container id="koyr56t8" type="exclusive">
                                    <title>Check Billing Subsidiary and update appropriate field</title>
                                    <flow id="koyr56t9">
                                       <assignment id="koyr56ta">
                                          <title>Assign to Netsuite Id to Ship-to Account</title>
                                          <operation source="field" to="Ship_To__r.Account__r.NetSuite_Id__c">output.NetSuite Customer ID</operation>
                                       </assignment>
                                       <link id="koyr56tl" targetId="koyr56t8" type="containerLink"/>
                                    </flow>
                                    <flow id="koyr56tb">
                                       <assignment id="koyr56tc">
                                          <title>Assign to Netsuite Id to Ship-to Account 1</title>
                                          <operation source="field" to="Ship_To__r.Account__r.UK2_Netsuite_ID__c">output.NetSuite Customer ID</operation>
                                       </assignment>
                                       <link id="koyr56tm" targetId="koyr56t8" type="containerLink"/>
                                    </flow>
                                    <link id="koyr56tj" targetId="koyr56t9" type="containerLink">
                                       <condition source="formula">
                                          <function name="string-equals">
                                             <arg name="left">{$temp.temp_BillingSubsidiary}</arg>
                                             <arg name="right">1</arg>
                                          </function>
                                       </condition>
                                    </link>
                                    <link id="koyr56tk" targetId="koyr56tb" type="containerLink"/>
                                 </container>
                                 <link id="koyr56ti" targetId="koyr56t6" type="containerLink"/>
                              </flow>
                              <flow id="koyr56td">
                                 <assignment id="koyr56te">
                                    <title>Assignment to faultstring</title>
                                    <operation source="constant" to="output.faultstring">End Customer Creation Error</operation>
                                    <operation source="constant" to="temp.exception">Yes</operation>
                                    <link id="koyr56tn" targetId="koyr56tf"/>
                                 </assignment>
                                 <jumpTo id="koyr56tf">
                                    <link id="koyr56to" targetId="jerndxei"/>
                                 </jumpTo>
                              </flow>
                              <link id="koyr56tg" targetId="koyr56t7" type="containerLink">
                                 <condition source="formula">
                                    <function name="string-equals">
                                       <arg name="left">{$output.isCreateCRSuccess}</arg>
                                       <arg name="right">true</arg>
                                    </function>
                                 </condition>
                              </link>
                              <link id="koyr56th" targetId="koyr56td" type="containerLink"/>
                           </container>
                           <link id="j71bjwnd" targetId="j71bjwlk" type="containerLink"/>
                        </flow>
                        <link id="j71bjwn4" targetId="j71bjwll" type="containerLink">
                           <condition source="formula">
                              <function name="true">
                                 <arg name="field">{$temp.temp_ShipToExists}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="j71bjwn5" targetId="j71bjwlt" type="containerLink">
                           <condition source="formula">
                              <function name="false">
                                 <arg name="field">{$temp.temp_ShipToExists}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <assignment id="kq8jgxui">
                        <title>Check if ShipTo exists</title>
                        <operation source="formula" to="temp.temp_ShipToExists">
                           <expression language="XQuery">if(fn:empty($Ship_To__r.Account__r.NetSuite_Id__c) and fn:empty($Ship_To__r.Account__r.UK2_Netsuite_ID__c)) then false() else true()</expression>
                        </operation>
                        <link id="kq8jgxuk" targetId="j71bjwlk"/>
                     </assignment>
                     <link id="j71bjwms" targetId="j71bjwkg" type="containerLink"/>
                  </flow>
                  <link id="j71bjwm0" targetId="j71bjwkh" type="containerLink">
                     <condition source="formula">
                        <function name="string-equals">
                           <arg name="left">{$temp.sameAccount}</arg>
                           <arg name="right">Yes</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="j71bjwm1" targetId="j71bjwl8" type="containerLink"/>
                  <link id="jrc1kvti" targetId="jrc1kvth"/>
               </container>
               <container id="jrc1kw7q" type="exclusive">
                  <title>Order Doesn't Exist in NS?</title>
                  <flow id="jrc1kw7u">
                     <link id="jrc1kw7v" targetId="jrc1kw7q" type="containerLink"/>
                  </flow>
                  <flow id="jrc1kw7x">
                     <jumpTo id="jrc1kwir">
                        <link id="jrc1kwm6" targetId="ixlcj3x6"/>
                     </jumpTo>
                  </flow>
                  <link id="jrc1kw7t" targetId="jrc1kw7u" type="containerLink">
                     <condition source="formula">
                        <function name="string-equals">
                           <arg name="left">{$output.search_SalesOrder_tranId}</arg>
                           <arg name="right"/>
                        </function>
                     </condition>
                  </link>
                  <link id="jrc1kw7w" targetId="jrc1kw7x" type="containerLink"/>
                  <link id="jrc1kw7s" targetId="idptne53"/>
               </container>
               <container id="jyiv1dmm" type="exclusive">
                  <title>Custom Payment Schedule Line Set?</title>
                  <flow id="jyiv1dmq">
                     <assignment id="jyiv1dsv">
                        <title>Assign Custom Payment Schedule Line</title>
                        <operation source="constant" to="temp.temp_calcAnyCustomScheduleItemsFound">true</operation>
                     </assignment>
                     <link id="jyiv1dmr" targetId="jyiv1dmm" type="containerLink"/>
                  </flow>
                  <flow id="jyiv1dmt">
                     <eventContainer id="k4jh7lp3">
                        <subflow id="k4jh7lio">
                           <title>FindCustomBillingSchedule</title>
                           <subflowGUID>56SedxwGqmClk8NTfREnam</subflowGUID>
                           <subflowPath>FindCustomBillingSchedule</subflowPath>
                           <runForEach>false</runForEach>
                           <input>
                              <parameter name="input_OrderProductList" source="field" updatable="true">temp.thisOrderProductList</parameter>
                           </input>
                           <outputDef>
                              <field name="out_IsCustom" type="boolean">
                                 <options>
                                    <option name="defaultvalue">false</option>
                                    <option name="boolean_show_as">checkbox</option>
                                    <option name="required">false</option>
                                 </options>
                              </field>
                           </outputDef>
                        </subflow>
                        <flow id="k4jh7lp5">
                           <link id="k4jh7lp6" targetId="k4jh7lp3" type="containerLink"/>
                        </flow>
                        <flow id="k4jh7lp8">
                           <container id="k4jh7ltb" type="exclusive">
                              <title>faultInfo</title>
                              <flow id="k4jh7ltd">
                                 <assignment id="k4jh7lxz">
                                    <title>Assignment to exception</title>
                                    <operation source="field" to="temp.exception">output.faultInfo</operation>
                                    <link id="k4jh7mb1" targetId="k4jh7maz"/>
                                 </assignment>
                                 <jumpTo id="k4jh7maz">
                                    <link id="k4jh7mb0" targetId="jerndxei"/>
                                 </jumpTo>
                              </flow>
                              <flow id="k4jh7ltg">
                                 <link id="k4jh7lth" targetId="k4jh7ltb" type="containerLink"/>
                              </flow>
                              <link id="k4jh7ltc" targetId="k4jh7ltd" type="containerLink">
                                 <condition source="formula">
                                    <function name="set">
                                       <arg name="field">{$output.faultInfo}</arg>
                                    </function>
                                 </condition>
                              </link>
                              <link id="k4jh7ltf" targetId="k4jh7ltg" type="containerLink">
                                 <condition source="formula">
                                    <function name="unset">
                                       <arg name="field">{$output.faultInfo}</arg>
                                    </function>
                                 </condition>
                              </link>
                           </container>
                           <link id="k4jh7lp9" targetId="k4jh7lp3" type="containerLink"/>
                        </flow>
                        <link id="k4jh7lp4" targetId="k4jh7lp5" type="containerLink"/>
                        <link id="k4jh7mhc" targetId="k4jh7mhb"/>
                        <events>
                           <catch faultField="faultInfo" id="k4jh7lip" interrupting="true">
                              <link id="k4jh7lp7" targetId="k4jh7lp8" type="containerLink"/>
                           </catch>
                        </events>
                     </eventContainer>
                     <container id="k4jh7mhb" type="exclusive">
                        <title>If Custom Schedule Found?</title>
                        <flow id="k4jh7mhe">
                           <assignment id="k4jh7n2r">
                              <title>Assign Custom Payment Schedule Line 1</title>
                              <operation source="constant" to="temp.temp_calcAnyCustomScheduleItemsFound">true</operation>
                           </assignment>
                           <link id="k4jh7mhf" targetId="k4jh7mhb" type="containerLink"/>
                        </flow>
                        <flow id="k4jh7mhh">
                           <link id="k4jh7mhi" targetId="k4jh7mhb" type="containerLink"/>
                        </flow>
                        <link id="k4jh7mhd" targetId="k4jh7mhe" type="containerLink">
                           <condition source="formula">
                              <function name="true">
                                 <arg name="field">{$output.out_IsCustom}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="k4jh7mhg" targetId="k4jh7mhh" type="containerLink">
                           <condition source="formula">
                              <function name="false">
                                 <arg name="field">{$output.out_IsCustom}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="jyiv1dmu" targetId="jyiv1dmm" type="containerLink"/>
                  </flow>
                  <link id="jyiv1dmp" targetId="jyiv1dmq" type="containerLink">
                     <condition source="formula">
                        <function name="set">
                           <arg name="field">{$temp.temp_sfdcGetCustomScheduleLine}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="jyiv1dms" targetId="jyiv1dmt" type="containerLink">
                     <condition source="formula">
                        <function name="unset">
                           <arg name="field">{$temp.temp_sfdcGetCustomScheduleLine}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="jyiv1dmo" targetId="ixlcj49o"/>
               </container>
               <container id="ifrz7mtc" type="exclusive">
                  <title>Order Reference Number</title>
                  <flow id="ifrz7muh">
                     <service id="ifrz7nnq">
                        <title>Create Sales Order</title>
                        <serviceName>NetSuite-AppDynamics:Create Sales Order</serviceName>
                        <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                        <serviceInput>
                           <parameter name="SalesOrder" source="field" updatable="true">temp.thisSalesOrder</parameter>
                           <parameter name="NSHeaderCustomFields" source="field" updatable="true">temp.thisNSHeaderCustomFields</parameter>
                        </serviceInput>
                        <link id="ifrz7np4" targetId="ifrz7np3"/>
                     </service>
                     <container id="ifrz7np3" type="exclusive">
                        <title>isCreateSOSuccess</title>
                        <flow id="ifrz7nqh">
                           <link id="ifrz7nqi" targetId="ifrz7np3" type="containerLink"/>
                        </flow>
                        <flow id="ifrz7nqk">
                           <assignment id="j2s68czc">
                              <title>Assign Exception</title>
                              <operation source="constant" to="temp.exception">Yes</operation>
                              <link id="j2s68d0b" targetId="ifrz7nqj"/>
                           </assignment>
                           <jumpTo id="ifrz7nqj">
                              <link id="ifrz7nrk" targetId="jerndxei"/>
                           </jumpTo>
                        </flow>
                        <link id="ifrz7nqe" targetId="ifrz7nqh" type="containerLink">
                           <condition source="formula">
                              <function name="string-equals">
                                 <arg name="left">{$output.isCreateSOSuccess}</arg>
                                 <arg name="right">true</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="ifrz7nqf" targetId="ifrz7nqk" type="containerLink"/>
                     </container>
                     <link id="ifrz7mui" targetId="ifrz7mtc" type="containerLink"/>
                  </flow>
                  <flow id="ifrz7muk">
                     <service id="ifrz7n9r">
                        <title>Lookup Sales Order</title>
                        <serviceName>NetSuite-AppDynamics:Get Sales Order</serviceName>
                        <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                        <serviceInput>
                           <parameter name="InternalID" source="field" updatable="true">OrderReferenceNumber</parameter>
                        </serviceInput>
                        <link id="ifrz7naz" targetId="ifrz7nay"/>
                     </service>
                     <container id="ifrz7nay" type="exclusive">
                        <title>isGetSOSuccess</title>
                        <flow id="ifrz7ncp">
                           <service id="ifrz7ngl">
                              <title>Update SalesOrder</title>
                              <serviceName>NetSuite-AppDynamics:UpdateSalesOrder V2</serviceName>
                              <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                              <serviceInput>
                                 <parameter name="NetSuiteId" source="field" updatable="true">OrderReferenceNumber</parameter>
                                 <parameter name="SalesOrder" source="field">temp.thisSalesOrder</parameter>
                                 <parameter name="NSHeaderCustomFields" source="field">temp.thisNSHeaderCustomFields</parameter>
                              </serviceInput>
                              <link id="ifrz7njq" targetId="ifrz7njp"/>
                           </service>
                           <container id="ifrz7njp" type="exclusive">
                              <title>isUpdateSOSuccess</title>
                              <flow id="ifrz7nl0">
                                 <link id="ifrz7nl1" targetId="ifrz7njp" type="containerLink"/>
                              </flow>
                              <flow id="ifrz7nl3">
                                 <assignment id="j2s68d49">
                                    <title>Assign Exception</title>
                                    <operation source="constant" to="temp.exception">Yes</operation>
                                    <link id="j2s68d4a" targetId="ifrz7nl2"/>
                                 </assignment>
                                 <jumpTo id="ifrz7nl2">
                                    <link id="ifrz7nlv" targetId="jerndxei"/>
                                 </jumpTo>
                              </flow>
                              <link id="ifrz7nkx" targetId="ifrz7nl0" type="containerLink">
                                 <condition source="formula">
                                    <function name="string-equals">
                                       <arg name="left">{$output.isUpdateSOSuccess}</arg>
                                       <arg name="right">true</arg>
                                    </function>
                                 </condition>
                              </link>
                              <link id="ifrz7nky" targetId="ifrz7nl3" type="containerLink"/>
                           </container>
                           <link id="ifrz7ncq" targetId="ifrz7nay" type="containerLink"/>
                        </flow>
                        <flow id="ifrz7ncs">
                           <assignment id="j2s68d1b">
                              <title>Assign Exception</title>
                              <operation source="constant" to="temp.exception">Yes</operation>
                              <link id="j2s68d1c" targetId="ifrz7ncr"/>
                           </assignment>
                           <jumpTo id="ifrz7ncr">
                              <link id="ifrz7neu" targetId="jerndxei"/>
                           </jumpTo>
                        </flow>
                        <link id="ifrz7ncm" targetId="ifrz7ncp" type="containerLink">
                           <condition source="formula">
                              <function name="string-equals">
                                 <arg name="left">{$output.isGetSOSuccess}</arg>
                                 <arg name="right">true</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="ifrz7ncn" targetId="ifrz7ncs" type="containerLink"/>
                     </container>
                     <link id="ifrz7mul" targetId="ifrz7mtc" type="containerLink"/>
                  </flow>
                  <link id="ifrz7mue" targetId="ifrz7muh" type="containerLink">
                     <condition source="formula">
                        <function name="string-equals">
                           <arg name="left">{$OrderReferenceNumber}</arg>
                           <arg name="right"/>
                        </function>
                     </condition>
                  </link>
                  <link id="ifrz7muf" targetId="ifrz7muk" type="containerLink"/>
                  <link id="ixlcj3x7" targetId="ixlcj3x6"/>
               </container>
               <container id="j58f4994" type="exclusive">
                  <title>isGetSOSuccess</title>
                  <flow id="j58f49eh">
                     <assignment id="j58f49l4">
                        <title>Assignment to order exception</title>
                        <operation source="constant" to="temp.exception">Yes</operation>
                        <operation source="constant" to="temp.exceptionOrder">Sales Order # not returned</operation>
                        <link id="k9waj16q" targetId="k9waj16p"/>
                     </assignment>
                     <assignment id="k9waj16p">
                        <title>Assign Error to Order Lines</title>
                        <operation source="formula" to="temp.temp_orderProduct">
                           <expression language="XQuery">list:head($temp.thisOrderProductList)</expression>
                        </operation>
                        <operation source="formula" to="temp.thisOrderProductList">
                           <expression language="XQuery">list:tail($temp.thisOrderProductList)</expression>
                        </operation>
                        <link id="k9waj1mf" targetId="k9waj1me"/>
                     </assignment>
                     <container id="k9waj1me" type="exclusive">
                        <title>Is Order Product Set?</title>
                        <flow id="k9waj1mi">
                           <assignment id="k9waj1tn">
                              <title>Update Error status on Order line</title>
                              <operation source="constant" to="temp.temp_orderProduct.NS_Integration_Status__c">Error</operation>
                              <link id="k9waj20r" targetId="k9waj20p"/>
                           </assignment>
                           <jumpTo id="k9waj20p">
                              <link id="k9waj20q" targetId="k9waj16p"/>
                           </jumpTo>
                        </flow>
                        <flow id="k9waj1ml">
                           <link id="k9waj1mm" targetId="k9waj1me" type="containerLink"/>
                        </flow>
                        <link id="k9waj1mh" targetId="k9waj1mi" type="containerLink">
                           <condition source="formula">
                              <function name="set">
                                 <arg name="field">{$temp.temp_orderProduct}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="k9waj1mk" targetId="k9waj1ml" type="containerLink">
                           <condition source="formula">
                              <function name="unset">
                                 <arg name="field">{$temp.temp_orderProduct}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="k9waj1mg" targetId="j58f49eg"/>
                     </container>
                     <jumpTo id="j58f49eg">
                        <link id="j58f49ik" targetId="jerndxei"/>
                     </jumpTo>
                  </flow>
                  <flow id="j58f49ek">
                     <container id="knks77lj" type="parallel">
                        <title>Parallel Paths 1</title>
                        <flow id="knks77lm">
                           <eventContainer id="knks77oc">
                              <subflow id="knks77of">
                                 <title>Update SFDC Order With TranID</title>
                                 <subflowGUID>lODQrP0MdcXe55ZaPea7Om</subflowGUID>
                                 <subflowPath>SFDC_Update_Order</subflowPath>
                                 <runForEach>false</runForEach>
                                 <input>
                                    <parameter name="input_OrderToUpdate" source="query" updatable="true">
                                       <query advanceQuery="false" from="Salesforce:Order">
                                          <where>Id = '{$Id}' </where>
                                       </query>
                                    </parameter>
                                    <parameter name="input_NS_TranID" source="field" updatable="true">output.NSsalesOrder[1]/tranId</parameter>
                                 </input>
                                 <outputDef/>
                              </subflow>
                              <flow id="knks77od">
                                 <link id="knks77oi" targetId="knks77oc" type="containerLink"/>
                              </flow>
                              <flow id="knks77oe">
                                 <assignment id="knks78rv">
                                    <title>Assignment to temp_RetryCounter</title>
                                    <operation source="formula" to="temp.temp_RetryCounter">
                                       <expression language="XQuery">$temp.temp_RetryCounter + 1</expression>
                                    </operation>
                                    <link id="knktpown" targetId="knktpo91"/>
                                 </assignment>
                                 <container id="knktpo91" type="exclusive">
                                    <title>Check if counter &gt; 5</title>
                                    <flow id="knktpo94">
                                       <link id="knktpo95" targetId="knktpo91" type="containerLink"/>
                                    </flow>
                                    <flow id="knktpo97">
                                       <wait id="knktpoyw">
                                          <title>Wait for 10 secs between retries</title>
                                          <duration source="formula">
                                             <function name="duration_expression">
                                                <arg name="value">10</arg>
                                                <arg name="scale">S</arg>
                                                <arg name="businessDays"/>
                                             </function>
                                          </duration>
                                          <link id="knktpoyx" targetId="knktpomk"/>
                                       </wait>
                                       <jumpTo id="knktpomk">
                                          <link id="knktpoml" targetId="knks77oc"/>
                                       </jumpTo>
                                    </flow>
                                    <link id="knktpo93" targetId="knktpo94" type="containerLink">
                                       <condition source="formula">
                                          <function name="greater-than">
                                             <arg name="left">{$temp.temp_RetryCounter}</arg>
                                             <arg name="right">{5}</arg>
                                          </function>
                                       </condition>
                                    </link>
                                    <link id="knktpo96" targetId="knktpo97" type="containerLink"/>
                                 </container>
                                 <link id="knks77oj" targetId="knks77oc" type="containerLink"/>
                              </flow>
                              <link id="knks77og" targetId="knks77od" type="containerLink"/>
                              <events>
                                 <catch faultField="faultInfo" id="kjt4k9fb" interrupting="true">
                                    <link id="knks77oh" targetId="knks77oe" type="containerLink"/>
                                 </catch>
                              </events>
                           </eventContainer>
                           <link id="knks77ln" targetId="knks77lj" type="containerLink"/>
                        </flow>
                        <flow id="knks77lp">
                           <eventContainer id="knks77v9">
                              <subflow id="knks77vc">
                                 <title>Update SFDC Lines with TranID</title>
                                 <subflowGUID>gQhqDHf642RhdeqzpHEVQe</subflowGUID>
                                 <subflowPath>SFDC_Update_Order_Lines</subflowPath>
                                 <runForEach>false</runForEach>
                                 <input>
                                    <parameter name="input_SFDC_OrderItems_ToUpdate"
                                               source="field"
                                               updatable="true">temp.thisOrderProductList</parameter>
                                    <parameter name="input_NS_tranId" source="field" updatable="true">output.NSsalesOrder[1]/tranId</parameter>
                                 </input>
                                 <outputDef/>
                              </subflow>
                              <flow id="knks77va">
                                 <link id="knks77vf" targetId="knks77v9" type="containerLink"/>
                              </flow>
                              <flow id="knks77vb">
                                 <link id="knks77vg" targetId="knks77v9" type="containerLink"/>
                              </flow>
                              <link id="knks77vd" targetId="knks77va" type="containerLink"/>
                              <events>
                                 <catch faultField="faultInfo" id="kjt4k9kq" interrupting="true">
                                    <link id="knks77ve" targetId="knks77vb" type="containerLink"/>
                                 </catch>
                              </events>
                           </eventContainer>
                           <link id="knks77lq" targetId="knks77lj" type="containerLink"/>
                        </flow>
                        <flow id="knks77t0">
                           <container id="knks78i3" type="exclusive">
                              <title>Sales Order - Newly Created &amp; Not Already Existing?</title>
                              <flow id="knks78i4">
                                 <subflow id="knks78i5">
                                    <title>SyncAttachmentToNetSuite</title>
                                    <subflowGUID>3gJ1dRfaJ25lHLylc4qI6J</subflowGUID>
                                    <subflowPath>SyncAttachmentToNetSuite</subflowPath>
                                    <runForEach>false</runForEach>
                                    <input>
                                       <parameter name="parentId" source="field">Oppty_Id__c</parameter>
                                       <parameter name="netSuiteOrderId" source="field" updatable="true">output.NSinternalID</parameter>
                                    </input>
                                    <outputDef>
                                       <field name="errorSyncAttach" type="string">
                                          <options>
                                             <option name="required">false</option>
                                          </options>
                                       </field>
                                    </outputDef>
                                 </subflow>
                                 <link id="knks78i9" targetId="knks78i3" type="containerLink"/>
                              </flow>
                              <flow id="knks78i6">
                                 <link id="knks78ia" targetId="knks78i3" type="containerLink"/>
                              </flow>
                              <link id="knks78i7" targetId="knks78i4" type="containerLink">
                                 <condition source="formula">
                                    <function name="string-equals">
                                       <arg name="left">{$output.search_SalesOrder_internalId}</arg>
                                       <arg name="right"/>
                                    </function>
                                 </condition>
                              </link>
                              <link id="knks78i8" targetId="knks78i6" type="containerLink"/>
                           </container>
                           <link id="knks77t1" targetId="knks77lj" type="containerLink"/>
                        </flow>
                        <link id="knks77ll" targetId="knks77lm" type="containerLink"/>
                        <link id="knks77lo" targetId="knks77lp" type="containerLink"/>
                        <link id="knks77sz" targetId="knks77t0" type="containerLink"/>
                        <link id="knks78fs" targetId="jerndxei"/>
                     </container>
                     <assignment id="jerndxei">
                        <title>Update Order Exception</title>
                        <operation source="formula" to="Integration_Exception_Message__c">
                           <expression language="XQuery">fn:concat($output.status, ' ', $output.errorMessages,' ',$output.faultcode, ' ', $output.faultstring, ' ', $output.errorSyncAttach,' ',$temp.exception, ' ', $temp.exceptionOrder)</expression>
                        </operation>
                        <operation source="formula" to="Sync_Time__c">
                           <function name="time_from_now">
                              <arg name="value">0</arg>
                              <arg name="HM_flag">M</arg>
                           </function>
                        </operation>
                        <operation source="formula" to="SO_Integration_Status__c">
                           <expression language="XQuery">if ($temp.exception = 'Yes')
then 'Error'
else 'Integrated'</expression>
                        </operation>
                        <operation source="formula" to="output.out_error">
                           <expression language="XQuery">fn:concat($output.status,' ', $output.errorMessages,' ', $output.faultcode, ' ',$output.faultstring, ' ',$output.errorSyncAttach, ' ',$temp.exception, ' ',$temp.exceptionOrder)</expression>
                        </operation>
                        <operation source="constant" to="RecordTypeId">012340000007mHzAAI</operation>
                        <link id="jerndxhe" targetId="jerndxhd"/>
                     </assignment>
                     <assignment id="jerndxhd">
                        <title>Assignment to out_NetSuiteId</title>
                        <operation source="formula" to="output.out_NetSuiteId">
                           <expression language="XQuery">if(fn:string-length($output.search_SalesOrder_internalId)&gt;0) then $output.search_SalesOrder_internalId else $output.NSinternalID </expression>
                        </operation>
                        <link id="jerndxk4" targetId="jerndxk3"/>
                     </assignment>
                     <end id="jerndxk3">
                        <title>End</title>
                     </end>
                  </flow>
                  <link id="j58f49ee" targetId="j58f49eh" type="containerLink">
                     <condition source="formula">
                        <function name="string-equals">
                           <arg name="left">{$output.isGetSOSuccess}</arg>
                           <arg name="right"/>
                        </function>
                     </condition>
                  </link>
                  <link id="j58f49ef" targetId="j58f49ek" type="containerLink"/>
               </container>
               <service id="jrc1ku9q">
                  <title>Get Existing NS Customer - BillTo</title>
                  <serviceName>NetSuite-AppDynamics:Get Customer Info</serviceName>
                  <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                  <serviceInput>
                     <parameter name="InternalID" source="field" updatable="true">Bill_To__r.Account__r.NetSuite_Id__c</parameter>
                  </serviceInput>
                  <link id="jrc1kudb" targetId="jrc1kuda"/>
               </service>
               <service id="jrc1kvth">
                  <title>Check for Existing Order in NS</title>
                  <serviceName>NetSuite-AppDynamics:searchSalesOrderHeader</serviceName>
                  <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                  <serviceInput>
                     <parameter name="salesOrder_sfdcId" source="field">Id</parameter>
                     <parameter name="salesOrder_NS_statusNotClosed" source="constant">_salesOrderClosed</parameter>
                     <parameter name="salesOrder_NS_statusNotCancelled" source="constant">_salesOrderCancelled</parameter>
                  </serviceInput>
                  <link id="jrc1kw7r" targetId="jrc1kw7q"/>
               </service>
               <service id="ixlcj3x6">
                  <title>Get Sales Order</title>
                  <serviceName>NetSuite-AppDynamics:Get Sales Order</serviceName>
                  <serviceGUID>14LuGs1g15zcZeyDsfoMSl</serviceGUID>
                  <serviceInput>
                     <parameter name="InternalID" source="formula">
                        <expression language="XQuery">if(fn:string-length($output.search_SalesOrder_internalId)&gt;0) then $output.search_SalesOrder_internalId else $output.NSinternalID </expression>
                     </parameter>
                  </serviceInput>
                  <link id="j58f4995" targetId="j58f4994"/>
               </service>
               <subflow id="ixlcj49o">
                  <title>Build Sales Order Line List</title>
                  <subflowGUID>kqG4HNhic2Kk0kGc19ss2T</subflowGUID>
                  <subflowPath>NetSuiteAppDynamicsOrderLineList</subflowPath>
                  <appliesTo>Salesforce:OrderItem</appliesTo>
                  <appliesToDataName source="field">temp.thisOrderProductList</appliesToDataName>
                  <runForEach>true</runForEach>
                  <input>
                     <parameter name="inputItemList" source="field" updatable="true">temp.thisItemList</parameter>
                     <parameter name="isCustomScheduleLineFound" source="field" updatable="true">temp.temp_calcAnyCustomScheduleItemsFound</parameter>
                  </input>
                  <outputDef/>
                  <link id="ixlcj4gc" targetId="idt31pcn"/>
               </subflow>
            </flow>
         </process>
      </types1:Entry>
      <types1:GUID>7WXKpNZM9P0fHJt7ibcT6B</types1:GUID>
      <types1:DisplayName>SFDC_Order_to_NS_Sales_Order</types1:DisplayName>
   </types1:Item>
   <types1:CurrentServerDateTime>2021-06-26T02:23:05.111Z</types1:CurrentServerDateTime>
</aetgt:getResponse>
